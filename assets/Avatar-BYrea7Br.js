import{j as d}from"./jsx-runtime-qGIIFXMu.js";import{t as A,I as C,c as x}from"./tv-CIwtzMts.js";import{r as c}from"./index-CDs2tPxN.js";import{c as y}from"./createLucideIcon-zijr-BYg.js";import{c as w,p as u,s as h,a as N,b as O,e as S,f as M,G as P,H as G,z as L,D as j}from"./factory-Bfpif5Qa.js";import{c as D}from"./create-split-props-u5h9OPvL.js";import{c as F}from"./index-DE2wJq7j.js";import{a as U,u as $}from"./use-locale-context-hL6yk3cA.js";import{u as H}from"./use-event-eGuf5zsd.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=y("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),[_,k]=w({name:"AvatarContext",hookName:"useAvatarContext",providerName:"<AvatarProvider />"}),b=c.forwardRef((t,r)=>{const a=k(),e=u(a.getFallbackProps(),t);return d.jsx(h.span,{...e,ref:r})});b.displayName="AvatarFallback";const R=c.forwardRef((t,r)=>{const a=k(),e=u(a.getImageProps(),t);return d.jsx(h.img,{...e,ref:r})});R.displayName="AvatarImage";var B=N("avatar").parts("root","image","fallback"),v=B.build(),n=O({getRootId:t=>{var r;return((r=t.ids)==null?void 0:r.root)??`avatar:${t.id}`},getImageId:t=>{var r;return((r=t.ids)==null?void 0:r.image)??`avatar:${t.id}:image`},getFallbackId:t=>{var r;return((r=t.ids)==null?void 0:r.fallback)??`avatar:${t.id}:fallback`},getRootEl:t=>n.getById(t,n.getRootId(t)),getImageEl:t=>n.getById(t,n.getImageId(t))});function V(t,r,a){const e=t.matches("loaded");return{loaded:e,setSrc(s){r({type:"SRC.SET",src:s})},setLoaded(){r({type:"IMG.LOADED",src:"api"})},setError(){r({type:"IMG.ERROR",src:"api"})},getRootProps(){return a.element({...v.root.attrs,dir:t.context.dir,id:n.getRootId(t.context)})},getImageProps(){return a.img({...v.image.attrs,hidden:!e,dir:t.context.dir,id:n.getImageId(t.context),"data-state":e?"visible":"hidden",onLoad(){r({type:"IMG.LOADED",src:"element"})},onError(){r({type:"IMG.ERROR",src:"element"})}})},getFallbackProps(){return a.element({...v.fallback.attrs,dir:t.context.dir,id:n.getFallbackId(t.context),hidden:e,"data-state":e?"hidden":"visible"})}}}function W(t){const r=F(t);return S({id:"avatar",initial:"loading",activities:["trackImageRemoval"],context:r,on:{"SRC.CHANGE":{target:"loading"},"IMG.UNMOUNT":{target:"error"}},states:{loading:{activities:["trackSrcChange"],entry:["checkImageStatus"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]},"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}},error:{activities:["trackSrcChange"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]}}},loaded:{activities:["trackSrcChange"],on:{"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}}}},{activities:{trackSrcChange(a,e,{send:s}){const o=n.getImageEl(a);return P(o,{attributes:["src","srcset"],callback(){s({type:"SRC.CHANGE"})}})},trackImageRemoval(a,e,{send:s}){const o=n.getRootEl(a);return G(o,{callback(i){Array.from(i[0].removedNodes).find(l=>l.matches("[data-scope=avatar][data-part=image]"))&&s({type:"IMG.UNMOUNT"})}})}},actions:{invokeOnLoad(a){var e;(e=a.onStatusChange)==null||e.call(a,{status:"loaded"})},invokeOnError(a){var e;(e=a.onStatusChange)==null||e.call(a,{status:"error"})},checkImageStatus(a,e,{send:s}){const o=n.getImageEl(a);if(o!=null&&o.complete){const i=q(o)?"IMG.LOADED":"IMG.ERROR";s({type:i,src:"ssr"})}}}})}function q(t){return t.complete&&t.naturalWidth!==0&&t.naturalHeight!==0}M()(["dir","id","ids","onStatusChange","getRootNode"]);const z=(t={})=>{const{getRootNode:r}=U(),{dir:a}=$(),e={id:c.useId(),dir:a,getRootNode:r,...t},s={...e,onStatusChange:H(t.onStatusChange)},[o,i]=L(W(e),{context:s});return V(o,i,j)},E=c.forwardRef((t,r)=>{const[a,e]=D()(t,["id","ids","onStatusChange"]),s=z(a),o=u(s.getRootProps(),e);return d.jsx(_,{value:s,children:d.jsx(h.div,{...o,ref:r})})});E.displayName="AvatarRoot";const I=t=>typeof t=="number",J=t=>Object.is(t,void 0)||Object.is(t,null),K=t=>!J(t),Q=A({base:`${C.scope} avatar`,slots:{root:"trds-rounded-full trds-overflow-hidden",fallback:"trds-bg-muted",image:"trds-bg-muted"},variants:{size:{xs:{root:"trds-w-6 trds-h-6",fallback:"trds-w-6 trds-h-6",image:"trds-w-6 trds-h-6"},sm:{root:"trds-w-8 trds-h-8",fallback:"trds-w-8 trds-h-8",image:"trds-w-8 trds-h-8"},md:{root:"trds-w-10 trds-h-10",fallback:"trds-w-10 trds-h-10",image:"trds-w-10 trds-h-10"},lg:{root:"trds-w-12 trds-h-12",fallback:"trds-w-12 trds-h-12",image:"trds-w-12 trds-h-12"},xl:{root:"trds-w-14 trds-h-14",fallback:"trds-w-14 trds-h-14",image:"trds-w-14 trds-h-14"},"2xl":{root:"trds-w-16 trds-h-16",fallback:"trds-w-16 trds-h-16",image:"trds-w-16 trds-h-16"},none:{root:"",fallback:"",image:""}}},defaultVariants:{size:"md"}}),X=c.forwardRef((t,r)=>{const{fallback:a,src:e,alt:s,size:o,className:i,children:m,...p}=t,l=I(o),g=Q({size:l?"none":o}),f=m&&c.Children.only(m);return d.jsxs(E,{ref:r,className:x(g.root(),i),...p,children:[d.jsx(R,{src:e,alt:s,className:g.image(),style:{width:l?`${o}px`:void 0,height:l?`${o}px`:void 0},asChild:K(f),children:f}),d.jsx(b,{className:g.fallback(),asChild:!0,children:a??d.jsx(T,{size:I(o)?o:Y(o)})})]})}),Y=t=>t==="xs"?24:t==="sm"?32:t==="md"?40:t==="lg"?48:t==="xl"?56:t==="2xl"?64:t==="none"?0:40;X.__docgenInfo={description:"",methods:[],displayName:"Avatar"};export{X as A,T as U};
