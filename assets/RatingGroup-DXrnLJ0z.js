import{j as n}from"./jsx-runtime-qGIIFXMu.js";import{t as M,I as S,c as F}from"./tv-CIwtzMts.js";import{r as m}from"./index-CDs2tPxN.js";import{c as H,m as I,h as V,a as D,b as U,T as W,d as p,U as q,e as z,f as O,r as B,A as $,E as K}from"./factory-CWkxw2Z4.js";import{c as A}from"./create-split-props-u5h9OPvL.js";import{d as Z,e as X,h as J,g as Q}from"./index-1fMUQAsE.js";import{a as Y,t as ee}from"./index-DBzJ7FiP.js";import{c as te,a as y}from"./index-DE2wJq7j.js";import{u as oe,a as re}from"./use-locale-context-D5jQfAP4.js";import{u as b}from"./use-event-eGuf5zsd.js";import{u as G}from"./use-field-context-OrFpox1S.js";const[ae,x]=H({name:"RatingGroupContext",hookName:"useRatingGroupContext",providerName:"<RatingGroupProvider />"}),ne=e=>e.children(x()),k=m.forwardRef((e,o)=>{const t=x(),r=I(t.getControlProps(),e);return n.jsx(V.div,{...r,ref:o})});k.displayName="RatingGroupControl";const _=m.forwardRef((e,o)=>{const t=x(),r=I(t.getHiddenInputProps(),e),a=G();return n.jsx(V.input,{"aria-describedby":a==null?void 0:a.ariaDescribedby,...r,ref:o})});_.displayName="RatingGroupHiddenInput";const[ie,se]=H({name:"RatingGroupItemContext",hookName:"useRatingGroupItemContext",providerName:"<RatingGroupItemProvider />"}),N=m.forwardRef((e,o)=>{const[t,r]=A()(e,["index"]),a=x(),d=I(a.getItemProps(t),r),g=a.getItemState(t);return n.jsx(ie,{value:g,children:n.jsx(V.span,{...d,ref:o})})});N.displayName="RatingGroupItem";const le=e=>e.children(se());var de=D("rating-group").parts("root","label","item","control"),R=de.build(),i=U({getRootId:e=>{var o;return((o=e.ids)==null?void 0:o.root)??`rating:${e.id}`},getLabelId:e=>{var o;return((o=e.ids)==null?void 0:o.label)??`rating:${e.id}:label`},getHiddenInputId:e=>{var o;return((o=e.ids)==null?void 0:o.hiddenInput)??`rating:${e.id}:input`},getControlId:e=>{var o;return((o=e.ids)==null?void 0:o.control)??`rating:${e.id}:control`},getItemId:(e,o)=>{var t,r;return((r=(t=e.ids)==null?void 0:t.item)==null?void 0:r.call(t,o))??`rating:${e.id}:item:${o}`},getRootEl:e=>i.getById(e,i.getRootId(e)),getControlEl:e=>i.getById(e,i.getControlId(e)),getRadioEl:(e,o=e.value)=>{const t=`[role=radio][aria-posinset='${Math.ceil(o)}']`;return W(i.getControlEl(e),t)},getHiddenInputEl:e=>i.getById(e,i.getHiddenInputId(e)),dispatchChangeEvent:e=>{const o=i.getHiddenInputEl(e);o&&Y(o,{value:e.value})}});function ue(e,o,t){const r=e.context.isInteractive,a=e.context.isDisabled,d=e.context.value,g=e.context.hoveredValue,h=e.context.translations;function f(s){const l=e.context.isHovering?e.context.hoveredValue:e.context.value,u=Math.ceil(l)===s.index,L=s.index<=l||u,c=u&&Math.abs(l-s.index)===.5;return{highlighted:L,half:c,checked:u||e.context.value===-1&&s.index===1}}return{hovering:e.context.isHovering,value:d,hoveredValue:g,count:e.context.count,items:Array.from({length:e.context.count}).map((s,l)=>l+1),setValue(s){o({type:"SET_VALUE",value:s})},clearValue(){o("CLEAR_VALUE")},getRootProps(){return t.element({...R.root.attrs,dir:e.context.dir,id:i.getRootId(e.context)})},getHiddenInputProps(){return t.input({name:e.context.name,form:e.context.form,type:"text",hidden:!0,disabled:a,readOnly:e.context.readOnly,required:e.context.required,id:i.getHiddenInputId(e.context),defaultValue:e.context.value})},getLabelProps(){return t.label({...R.label.attrs,dir:e.context.dir,id:i.getLabelId(e.context),"data-disabled":p(a),htmlFor:i.getHiddenInputId(e.context),onClick(s){if(s.defaultPrevented||!r)return;s.preventDefault();const l=i.getRadioEl(e.context,1);l==null||l.focus({preventScroll:!0})}})},getControlProps(){return t.element({id:i.getControlId(e.context),...R.control.attrs,dir:e.context.dir,role:"radiogroup","aria-orientation":"horizontal","aria-labelledby":i.getLabelId(e.context),"aria-readonly":q(e.context.readOnly),"data-readonly":p(e.context.readOnly),tabIndex:e.context.readOnly?0:-1,"data-disabled":p(a),onPointerMove(s){r&&s.pointerType!=="touch"&&o("GROUP_POINTER_OVER")},onPointerLeave(s){r&&s.pointerType!=="touch"&&o("GROUP_POINTER_LEAVE")}})},getItemState:f,getItemProps(s){const{index:l}=s,u=f(s),L=h.ratingValueText(l);return t.element({...R.item.attrs,dir:e.context.dir,id:i.getItemId(e.context,l.toString()),role:"radio",tabIndex:a?void 0:u.checked?0:-1,"aria-roledescription":"rating","aria-label":L,"aria-disabled":a,"data-disabled":p(a),"data-readonly":p(e.context.readOnly),"aria-setsize":e.context.count,"aria-checked":u.checked,"data-checked":p(u.checked),"aria-posinset":l,"data-highlighted":p(u.highlighted),"data-half":p(u.half),onPointerDown(c){r&&Z(c)&&c.preventDefault()},onPointerMove(c){if(!r)return;const E=X(c),j=J(E,c.currentTarget).getPercentValue({orientation:"horizontal",dir:e.context.dir})<.5;o({type:"POINTER_OVER",index:l,isMidway:j})},onKeyDown(c){if(c.defaultPrevented||!r)return;const E={ArrowLeft(){o("ARROW_LEFT")},ArrowRight(){o("ARROW_RIGHT")},ArrowUp(){o("ARROW_LEFT")},ArrowDown(){o("ARROW_RIGHT")},Space(){o({type:"SPACE",value:l})},Home(){o("HOME")},End(){o("END")}},P=Q(c,e.context),C=E[P];C&&(c.preventDefault(),C(c))},onClick(){r&&o({type:"CLICK",value:l})},onFocus(){r&&o("FOCUS")},onBlur(){r&&o("BLUR")}})}}}function ce(e){const o=te(e);return z({id:"rating",initial:"idle",context:{name:"rating",count:5,dir:"ltr",value:-1,readOnly:!1,disabled:!1,...o,hoveredValue:-1,fieldsetDisabled:!1,translations:{ratingValueText:t=>`${t} stars`,...o.translations}},created:["roundValueIfNeeded"],watch:{allowHalf:["roundValueIfNeeded"]},computed:{isDisabled:t=>!!t.disabled||t.fieldsetDisabled,isInteractive:t=>!(t.isDisabled||t.readOnly),isHovering:t=>t.hoveredValue>-1},activities:["trackFormControlState"],on:{SET_VALUE:{actions:["setValue"]},CLEAR_VALUE:{actions:["clearValue"]}},states:{idle:{entry:"clearHoveredValue",on:{GROUP_POINTER_OVER:"hover",FOCUS:"focus",CLICK:{actions:["setValue","focusActiveRadio"]}}},focus:{on:{POINTER_OVER:{actions:"setHoveredValue"},GROUP_POINTER_LEAVE:{actions:"clearHoveredValue"},BLUR:"idle",SPACE:{guard:"isValueEmpty",actions:["setValue"]},CLICK:{actions:["setValue","focusActiveRadio"]},ARROW_LEFT:{actions:["setPrevValue","focusActiveRadio"]},ARROW_RIGHT:{actions:["setNextValue","focusActiveRadio"]},HOME:{actions:["setValueToMin","focusActiveRadio"]},END:{actions:["setValueToMax","focusActiveRadio"]}}},hover:{on:{POINTER_OVER:{actions:"setHoveredValue"},GROUP_POINTER_LEAVE:[{guard:"isRadioFocused",target:"focus",actions:"clearHoveredValue"},{target:"idle",actions:"clearHoveredValue"}],CLICK:{actions:["setValue","focusActiveRadio"]}}}}},{guards:{isInteractive:t=>!(t.disabled||t.readOnly),isHoveredValueEmpty:t=>t.hoveredValue===-1,isValueEmpty:t=>t.value<=0,isRadioFocused:t=>{var r;return!!((r=i.getControlEl(t))!=null&&r.contains(i.getActiveElement(t)))}},activities:{trackFormControlState(t,r,{initialContext:a}){return ee(i.getHiddenInputEl(t),{onFieldsetDisabledChange(d){t.fieldsetDisabled=d},onFormReset(){v.value(t,a.value)}})}},actions:{clearHoveredValue(t){v.hoveredValue(t,-1)},focusActiveRadio(t){B(()=>{var r;return(r=i.getRadioEl(t))==null?void 0:r.focus()})},setPrevValue(t){const r=t.allowHalf?.5:1;v.value(t,Math.max(0,t.value-r))},setNextValue(t){const r=t.allowHalf?.5:1,a=t.value===-1?0:t.value;v.value(t,Math.min(t.count,a+r))},setValueToMin(t){v.value(t,1)},setValueToMax(t){v.value(t,t.count)},setValue(t,r){const a=t.hoveredValue===-1?r.value:t.hoveredValue;v.value(t,a)},clearValue(t){v.value(t,-1)},setHoveredValue(t,r){const d=t.allowHalf&&r.isMidway?.5:0;v.hoveredValue(t,r.index-d)},roundValueIfNeeded(t){t.allowHalf||(t.value=Math.round(t.value))}}})}var w={change:e=>{var o;(o=e.onValueChange)==null||o.call(e,{value:e.value}),i.dispatchChangeEvent(e)},hoverChange:e=>{var o;(o=e.onHoverChange)==null||o.call(e,{hoveredValue:e.hoveredValue})}},v={value:(e,o)=>{y(e.value,o)||(e.value=o,w.change(e))},hoveredValue:(e,o)=>{y(e.hoveredValue,o)||(e.hoveredValue=o,w.hoverChange(e))}};O()(["allowHalf","autoFocus","count","dir","disabled","form","getRootNode","id","ids","name","onHoverChange","onValueChange","required","readOnly","translations","value"]);O()(["index"]);const ge=e=>{const{getRootNode:o}=oe(),{dir:t}=re(),r=G(),a={id:m.useId(),ids:{label:r==null?void 0:r.ids.label,hiddenInput:r==null?void 0:r.ids.control},dir:t,disabled:r==null?void 0:r.disabled,readOnly:r==null?void 0:r.readOnly,required:r==null?void 0:r.required,getRootNode:o,value:e.defaultValue,...e},d={...a,value:e.value,onValueChange:b(e.onValueChange,{sync:!0}),onHoverChange:b(e.onHoverChange)},[g,h]=$(ce(a),{context:d});return ue(g,h,K)},T=m.forwardRef((e,o)=>{const[t,r]=A()(e,["allowHalf","autoFocus","count","defaultValue","disabled","form","id","ids","name","onHoverChange","onValueChange","readOnly","required","translations","value"]),a=ge(t),d=I(a.getRootProps(),r);return n.jsx(ae,{value:a,children:n.jsx(V.div,{...d,ref:o})})});T.displayName="RatingGroupRoot";const ve=M({base:`${S.scope} ratingGroup`,slots:{root:"trds-flex trds-flex-col trds-gap-1.5 trds-text-primary",control:"trds-flex",item:"trds-cursor-pointer trds-transition trds-duration-normal trds-transition-[color,fill] trds-ease-default trds-fill-transparent data-highlighted:trds-fill-current focus-visible:trds-outline-none data-disabled:trds-cursor-not-allowed data-disabled:trds-opacity-40"},variants:{size:{sm:{control:"trds-gap-0",item:"[&_svg:trds-w-4] [&_svg:trds-h-4]",label:"trds-text-sm"},md:{control:"trds-gap-0.5",item:"[&_svg:trds-w-5] [&_svg:trds-h-5]",label:"trds-text-sm"},lg:{control:"trds-gap-0.5",item:"[&_svg:trds-w-6] [&_svg:trds-h-6]",label:"trds-text-md"}}},defaultVariants:{size:"md"}}),pe=m.forwardRef(function(e,o){const{size:t,className:r,children:a,...d}=e,g=ve({size:t}),h=he(t);return n.jsxs(T,{ref:o,className:F(g.root(),r),...d,children:[n.jsx(k,{className:g.control(),children:n.jsx(ne,{children:({items:f})=>f.map(s=>n.jsx(N,{index:s,className:g.item(),children:n.jsx(le,{children:({half:l,highlighted:u})=>l&&u?n.jsx(fe,{size:h}):u?n.jsx(me,{size:h}):n.jsx(Re,{size:h})})},s))})}),n.jsx(_,{})]})}),he=e=>e==="sm"?12:e==="md"?16:e==="lg"?20:16,me=e=>{const{size:o,...t}=e;return n.jsx("svg",{width:o,height:o,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t,children:n.jsx("path",{d:"M15.09 8.26L12 2L8.91 8.26L2 9.27L7 14.14L5.82 21.02L12 17.77L18.18 21.02L17 14.14L22 9.27L15.09 8.26Z",stroke:"currentColor",fill:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})},fe=e=>{const{size:o,...t}=e;return n.jsxs("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[n.jsx("path",{d:"M15.09 8.26L12 2L8.91 8.26L2 9.27L7 14.14L5.82 21.02L12 17.77L18.18 21.02L17 14.14L22 9.27L15.09 8.26Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M5.82 21.02L12 17.77V2L8.91 8.26L2 9.27L7 14.14L5.82 21.02Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})},Re=e=>{const{size:o,...t}=e;return n.jsx("svg",{width:o,height:o,viewBox:"0 0 24 24",fill:"transparent",xmlns:"http://www.w3.org/2000/svg",...t,children:n.jsx("path",{d:"M15.09 8.26L12 2L8.91 8.26L2 9.27L7 14.14L5.82 21.02L12 17.77L18.18 21.02L17 14.14L22 9.27L15.09 8.26Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};pe.__docgenInfo={description:"",methods:[],displayName:"Root"};export{pe as R};
