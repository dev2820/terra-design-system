import{j as d}from"./jsx-runtime-qGIIFXMu.js";import{r as p}from"./index-CDs2tPxN.js";import{r as x}from"./index-B-yFm4aN.js";import{u as y}from"./use-locale-context-DWoAJph3.js";var S=Object.defineProperty,v=(r,t,e)=>t in r?S(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,i=(r,t,e)=>(v(r,typeof t!="symbol"?t+"":t,e),e);function w(r){let t,e,s=2166136261;for(t=0,e=r.length;t<e;t++)s^=r.charCodeAt(t),s+=(s<<1)+(s<<4)+(s<<7)+(s<<8)+(s<<24);return`00000${(s>>>0).toString(36)}`.slice(-6)}var c=r=>typeof r=="object"&&r!==null&&!Array.isArray(r),m=(r,t)=>Object.prototype.hasOwnProperty.call(r,t),f={itemToValue(r){return typeof r=="string"?r:c(r)&&m(r,"value")?r.value:""},itemToString(r){return typeof r=="string"?r:c(r)&&m(r,"label")?r.label:f.itemToValue(r)},itemToDisabled(r){return c(r)&&m(r,"disabled")?!!r.disabled:!1}},P=class{constructor(r){this.options=r,i(this,"nodes",new Map),i(this,"disabledValues",new Set),i(this,"_firstValue",null),i(this,"_lastValue",null),i(this,"hash",""),i(this,"isEqual",t=>this.hash===t.hash),i(this,"iterate",()=>{const{items:t}=this.options,e=new Set;for(let s=0;s<t.length;s++){const n=t[s],u=this.itemToValue(n),l=this.itemToString(n),a=this.itemToDisabled(n);e.add(JSON.stringify({value:u,label:l,disabled:a}));const o={item:Object.freeze(n),index:s,label:l,value:u,previousValue:this.itemToValue(t[s-1])??null,nextValue:this.itemToValue(t[s+1])??null};this.nodes.set(u,o),a&&this.disabledValues.add(u),s===0&&(this._firstValue=u),s===t.length-1&&(this._lastValue=u)}return this.hash=w(Array.from(e).join("")),this}),i(this,"setItems",t=>(this.options.items=t,this.iterate())),i(this,"item",t=>{var e;return t===null?null:((e=this.nodes.get(t))==null?void 0:e.item)??null}),i(this,"items",t=>t.map(e=>this.item(e)).filter(Boolean)),i(this,"at",t=>{for(const e of this.nodes.values())if(e.index===t)return e.item;return null}),i(this,"sortFn",(t,e)=>{const s=this.nodes.get(t),n=this.nodes.get(e);return((s==null?void 0:s.index)??0)-((n==null?void 0:n.index)??0)}),i(this,"sort",t=>[...t].sort(this.sortFn)),i(this,"itemToValue",t=>{var e,s;return t?((s=(e=this.options).itemToValue)==null?void 0:s.call(e,t))??f.itemToValue(t):""}),i(this,"itemToString",t=>{var e,s;return t?((s=(e=this.options).itemToString)==null?void 0:s.call(e,t))??f.itemToString(t):""}),i(this,"itemToDisabled",t=>{var e,s;return t?((s=(e=this.options).isItemDisabled)==null?void 0:s.call(e,t))??f.itemToDisabled(t):!1}),i(this,"valueToString",t=>{var e;return t==null?"":((e=this.nodes.get(t))==null?void 0:e.label)??""}),i(this,"itemsToString",(t,e=", ")=>t.map(s=>this.itemToString(s)).filter(Boolean).join(e)),i(this,"has",t=>t==null?!1:this.nodes.has(t)),i(this,"count",()=>this.nodes.size),i(this,"first",()=>{let t=this._firstValue;for(;t!=null;){let e=this.nodes.get(t);if(e!=null&&!this.disabledValues.has(e.value))return t;t=(e==null?void 0:e.nextValue)??null}return null}),i(this,"last",()=>{let t=this._lastValue;for(;t!=null;){let e=this.nodes.get(t);if(e!=null&&!this.disabledValues.has(e.value))return t;t=(e==null?void 0:e.previousValue)??null}return null}),i(this,"next",t=>{if(t==null)return null;const e=this.nodes.get(t);let s=(e==null?void 0:e.nextValue)??null;for(;s!=null;){let n=this.nodes.get(s);if(n!=null&&!this.disabledValues.has(n.value))return s;s=(n==null?void 0:n.nextValue)??null}return null}),i(this,"prev",t=>{if(t==null)return null;const e=this.nodes.get(t);let s=(e==null?void 0:e.previousValue)??null;for(;s!=null;){let n=this.nodes.get(s);if(n!=null&&!this.disabledValues.has(n.value))return s;s=(n==null?void 0:n.previousValue)??null}return null}),i(this,"isItemDisabled",t=>this.disabledValues.has(this.itemToValue(t))),i(this,"toArray",()=>Array.from(this.nodes.values())),i(this,"indexOf",t=>{var e;return t==null?-1:((e=this.nodes.get(t))==null?void 0:e.index)??-1}),i(this,"getByText",(t,e)=>{const s=this.indexOf(e);let n=e!=null?j(this.toArray(),s):this.toArray();return t.length===1&&(n=n.filter(l=>l.value!==e)),n.find(l=>_(l.label,t))}),i(this,"search",(t,e)=>{var b;const{state:s,currentValue:n,timeout:u=350}=e,l=s.keysSoFar+t,o=l.length>1&&Array.from(l).every(h=>h===l[0])?l[0]:l,T=((b=this.getByText(o,n))==null?void 0:b.value)??null;function g(){clearTimeout(s.timer),s.timer=-1}function V(h){s.keysSoFar=h,g(),h!==""&&(s.timer=+setTimeout(()=>{V(""),g()},u))}return V(l),T}),i(this,"toJSON",()=>({size:this.count(),first:this.first(),last:this.last()})),this.iterate()}},_=(r,t)=>r.toLowerCase().startsWith(t.toLowerCase()),j=(r,t)=>r.map((e,s)=>r[(Math.max(t,0)+s)%r.length]);const O=()=>{const[r,t]=p.useState(!0);return p.useEffect(()=>{t(!1)},[]),r},E=r=>{const{children:t,container:e,disabled:s}=r,n=O(),{getRootNode:u}=y();if(n||s)return d.jsx(d.Fragment,{children:t});const l=(u==null?void 0:u().ownerDocument)??document,a=(e==null?void 0:e.current)??l.body;return d.jsx(d.Fragment,{children:p.Children.map(t,o=>x.createPortal(o,a))})};export{P as C,E as P};
