import{j as d}from"./jsx-runtime-qGIIFXMu.js";import{I as E}from"./index-9MS2e6do.js";import{c as f,f as A}from"./index-DOljKnny.js";import{r as c}from"./index-CDs2tPxN.js";import{t as C,c as y}from"./tv-Br1lVx4G.js";import{c as N}from"./createLucideIcon-zijr-BYg.js";import{c as w,m as v,h as u,a as x,b as S,e as O,f as M,H as P,I as G,A as L,E as D}from"./factory-BCO0_PXk.js";import{c as j}from"./create-split-props-u5h9OPvL.js";import{c as F}from"./index-B1LdDssV.js";import{u as U,a as H}from"./use-locale-context-CTaGYWMe.js";import{u as T}from"./use-event-eGuf5zsd.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=N("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),[$,I]=w({name:"AvatarContext",hookName:"useAvatarContext",providerName:"<AvatarProvider />"}),k=c.forwardRef((t,e)=>{const a=I(),r=v(a.getFallbackProps(),t);return d.jsx(u.span,{...r,ref:e})});k.displayName="AvatarFallback";const R=c.forwardRef((t,e)=>{const a=I(),r=v(a.getImageProps(),t);return d.jsx(u.img,{...r,ref:e})});R.displayName="AvatarImage";var B=x("avatar").parts("root","image","fallback"),g=B.build(),n=S({getRootId:t=>{var e;return((e=t.ids)==null?void 0:e.root)??`avatar:${t.id}`},getImageId:t=>{var e;return((e=t.ids)==null?void 0:e.image)??`avatar:${t.id}:image`},getFallbackId:t=>{var e;return((e=t.ids)==null?void 0:e.fallback)??`avatar:${t.id}:fallback`},getRootEl:t=>n.getById(t,n.getRootId(t)),getImageEl:t=>n.getById(t,n.getImageId(t))});function V(t,e,a){const r=t.matches("loaded");return{loaded:r,setSrc(s){e({type:"SRC.SET",src:s})},setLoaded(){e({type:"IMG.LOADED",src:"api"})},setError(){e({type:"IMG.ERROR",src:"api"})},getRootProps(){return a.element({...g.root.attrs,dir:t.context.dir,id:n.getRootId(t.context)})},getImageProps(){return a.img({...g.image.attrs,hidden:!r,dir:t.context.dir,id:n.getImageId(t.context),"data-state":r?"visible":"hidden",onLoad(){e({type:"IMG.LOADED",src:"element"})},onError(){e({type:"IMG.ERROR",src:"element"})}})},getFallbackProps(){return a.element({...g.fallback.attrs,dir:t.context.dir,id:n.getFallbackId(t.context),hidden:r,"data-state":r?"hidden":"visible"})}}}function W(t){const e=F(t);return O({id:"avatar",initial:"loading",activities:["trackImageRemoval"],context:e,on:{"SRC.CHANGE":{target:"loading"},"IMG.UNMOUNT":{target:"error"}},states:{loading:{activities:["trackSrcChange"],entry:["checkImageStatus"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]},"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}},error:{activities:["trackSrcChange"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]}}},loaded:{activities:["trackSrcChange"],on:{"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}}}},{activities:{trackSrcChange(a,r,{send:s}){const o=n.getImageEl(a);return P(o,{attributes:["src","srcset"],callback(){s({type:"SRC.CHANGE"})}})},trackImageRemoval(a,r,{send:s}){const o=n.getRootEl(a);return G(o,{callback(i){Array.from(i[0].removedNodes).find(l=>l.matches("[data-scope=avatar][data-part=image]"))&&s({type:"IMG.UNMOUNT"})}})}},actions:{invokeOnLoad(a){var r;(r=a.onStatusChange)==null||r.call(a,{status:"loaded"})},invokeOnError(a){var r;(r=a.onStatusChange)==null||r.call(a,{status:"error"})},checkImageStatus(a,r,{send:s}){const o=n.getImageEl(a);if(o!=null&&o.complete){const i=q(o)?"IMG.LOADED":"IMG.ERROR";s({type:i,src:"ssr"})}}}})}function q(t){return t.complete&&t.naturalWidth!==0&&t.naturalHeight!==0}M()(["dir","id","ids","onStatusChange","getRootNode"]);const z=(t={})=>{const{getRootNode:e}=U(),{dir:a}=H(),r={id:c.useId(),dir:a,getRootNode:e,...t},s={...r,onStatusChange:T(t.onStatusChange)},[o,i]=L(W(r),{context:s});return V(o,i,D)},b=c.forwardRef((t,e)=>{const[a,r]=j()(t,["id","ids","onStatusChange"]),s=z(a),o=v(s.getRootProps(),r);return d.jsx($,{value:s,children:d.jsx(u.div,{...o,ref:e})})});b.displayName="AvatarRoot";const J=C({base:`${E.scope} avatar`,slots:{root:"trds-rounded-full trds-overflow-hidden",fallback:"trds-bg-muted trds-w-full trds-h-full",image:"trds-bg-muted"},variants:{size:{sm:{root:"trds-w-8 trds-h-8",fallback:"trds-w-8 trds-h-8",image:"trds-w-8 trds-h-8"},md:{root:"trds-w-10 trds-h-10",fallback:"trds-w-10 trds-h-10",image:"trds-w-10 trds-h-10"},lg:{root:"trds-w-12 trds-h-12",fallback:"trds-w-12 trds-h-12",image:"trds-w-12 trds-h-12"},xl:{root:"w-14 h-14",fallback:"w-14 h-14",image:"w-14 h-14"},"2xl":{root:"w-16 h-16",fallback:"w-16 h-16",image:"w-16 h-16"},none:{root:"",fallback:"",image:""}}},defaultVariants:{size:"md"}}),K=c.forwardRef((t,e)=>{const{fallback:a,src:r,alt:s,size:o,className:i,children:m,...h}=t,l=J({size:f(o)?"none":o}),p=m&&c.Children.only(m);return d.jsxs(b,{ref:e,className:y(l.root(),i),...h,children:[d.jsx(R,{src:r,alt:s,className:l.image(),asChild:A(p),children:p}),d.jsx(k,{className:l.fallback(),asChild:!0,children:a??d.jsx(_,{size:f(o)?o:Q(o)})})]})}),Q=t=>t==="sm"?32:t==="md"?40:t==="lg"?48:t==="xl"?56:t==="2xl"?64:t==="none"?0:40;K.__docgenInfo={description:"",methods:[],displayName:"Avatar"};export{K as A,_ as U};
