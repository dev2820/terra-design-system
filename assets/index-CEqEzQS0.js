import{r as w}from"./create-split-props-DTq8A8QE.js";var f=new WeakMap,o=[];function T(d,u={}){const{rootEl:E}=u,s=d.filter(Boolean);if(s.length===0)return;const l=s[0].ownerDocument||document,r=l.defaultView??window,a=new Set(s),c=new Set,p=E??l.body;let g=e=>{for(let i of e.querySelectorAll("[data-live-announcer], [data-zag-top-layer]"))a.add(i);let n=i=>{if(a.has(i)||c.has(i.parentElement)&&i.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let N of a)if(i.contains(N))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},t=l.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n}),v=n(e);if(v===NodeFilter.FILTER_ACCEPT&&m(e),v!==NodeFilter.FILTER_REJECT){let i=t.nextNode();for(;i!=null;)m(i),i=t.nextNode()}},m=e=>{let n=f.get(e)??0;e.getAttribute("aria-hidden")==="true"&&n===0||(n===0&&e.setAttribute("aria-hidden","true"),c.add(e),f.set(e,n+1))};o.length&&o[o.length-1].disconnect(),g(p);const h=new r.MutationObserver(e=>{for(let n of e)if(!(n.type!=="childList"||n.addedNodes.length===0)&&![...a,...c].some(t=>t.contains(n.target))){for(let t of n.removedNodes)t instanceof r.Element&&(a.delete(t),c.delete(t));for(let t of n.addedNodes)(t instanceof r.HTMLElement||t instanceof r.SVGElement)&&(t.dataset.liveAnnouncer==="true"||t.dataset.zagTopLayer==="true")?a.add(t):t instanceof r.Element&&g(t)}});h.observe(p,{childList:!0,subtree:!0});let b={observe(){h.observe(p,{childList:!0,subtree:!0})},disconnect(){h.disconnect()}};return o.push(b),()=>{h.disconnect();for(let e of c){let n=f.get(e);n===1?(e.removeAttribute("aria-hidden"),f.delete(e)):f.set(e,n-1)}b===o[o.length-1]?(o.pop(),o.length&&o[o.length-1].observe()):o.splice(o.indexOf(b),1)}}function F(d,u={}){const{defer:E}=u,s=E?w:r=>r(),l=[];return l.push(s(()=>{const r=typeof d=="function"?d():d;l.push(T(r,u))})),()=>{l.forEach(r=>r==null?void 0:r())}}export{F as a};
