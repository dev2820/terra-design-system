import{j as T}from"./jsx-runtime-qGIIFXMu.js";import{t as Me,I as Ge,c as $}from"./tv-CIwtzMts.js";import{r as O}from"./index-CDs2tPxN.js";import{c as $e}from"./create-react-context-Dw26gLIP.js";import{P as Ve}from"./portal-DrO_qajF.js";import{r as Z,i as We,c as Ue,m as k,h as L,a as qe,b as Xe,Q as Ye,d as _e,e as He,X as Je,n as Ze,f as Qe,Y as ve,A as ze,E as et}from"./factory-CWkxw2Z4.js";import{a as ce,u as tt,P as rt}from"./use-presence-8bHCsiKP.js";import{g as nt,a as ge,s as ot}from"./index-CTARPo-3.js";import{a as at}from"./index-DANWLHS3.js";import{c as it}from"./index-DE2wJq7j.js";import{u as st,a as ct}from"./use-locale-context-D5jQfAP4.js";import{u as lt}from"./use-event-eGuf5zsd.js";var X=new WeakMap,R=[];function ut(r,e={}){const{rootEl:t}=e,n=r.filter(Boolean);if(n.length===0)return;const o=n[0].ownerDocument||document,c=o.defaultView??window,a=new Set(n),d=new Set,u=t??o.body;let m=b=>{for(let P of b.querySelectorAll("[data-live-announcer], [data-zag-top-layer]"))a.add(P);let p=P=>{if(a.has(P)||d.has(P.parentElement)&&P.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let H of a)if(P.contains(H))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},w=o.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,{acceptNode:p}),j=p(b);if(j===NodeFilter.FILTER_ACCEPT&&F(b),j!==NodeFilter.FILTER_REJECT){let P=w.nextNode();for(;P!=null;)F(P),P=w.nextNode()}},F=b=>{let p=X.get(b)??0;b.getAttribute("aria-hidden")==="true"&&p===0||(p===0&&b.setAttribute("aria-hidden","true"),d.add(b),X.set(b,p+1))};R.length&&R[R.length-1].disconnect(),m(u);const E=new c.MutationObserver(b=>{for(let p of b)if(!(p.type!=="childList"||p.addedNodes.length===0)&&![...a,...d].some(w=>w.contains(p.target))){for(let w of p.removedNodes)w instanceof c.Element&&(a.delete(w),d.delete(w));for(let w of p.addedNodes)(w instanceof c.HTMLElement||w instanceof c.SVGElement)&&(w.dataset.liveAnnouncer==="true"||w.dataset.zagTopLayer==="true")?a.add(w):w instanceof c.Element&&m(w)}});E.observe(u,{childList:!0,subtree:!0});let C={observe(){E.observe(u,{childList:!0,subtree:!0})},disconnect(){E.disconnect()}};return R.push(C),()=>{E.disconnect();for(let b of d){let p=X.get(b);p===1?(b.removeAttribute("aria-hidden"),X.delete(b)):X.set(b,p-1)}C===R[R.length-1]?(R.pop(),R.length&&R[R.length-1].observe()):R.splice(R.indexOf(C),1)}}function dt(r,e={}){const{defer:t}=e,n=t?Z:c=>c(),o=[];return o.push(n(()=>{const c=typeof r=="function"?r():r;o.push(ut(c,e))})),()=>{o.forEach(c=>c==null?void 0:c())}}var ae="data-zag-scroll-lock";function be(r,e){if(!r)return;const t=r.style.cssText;return Object.assign(r.style,e),()=>{r.style.cssText=t}}function ft(r,e,t){if(!r)return;const n=r.style.getPropertyValue(e);return r.style.setProperty(e,t),()=>{n?r.style.setProperty(e,n):r.style.removeProperty(e)}}function pt(r){const e=r.getBoundingClientRect().left;return Math.round(e)+r.scrollLeft?"paddingLeft":"paddingRight"}function vt(r){const e=r??document,t=e.defaultView??window,{documentElement:n,body:o}=e;if(o.hasAttribute(ae))return;o.setAttribute(ae,"");const a=t.innerWidth-n.clientWidth,d=()=>ft(n,"--scrollbar-width",`${a}px`),u=pt(n),m=()=>be(o,{overflow:"hidden",[u]:`${a}px`}),F=()=>{const{scrollX:C,scrollY:b,visualViewport:p}=t,w=(p==null?void 0:p.offsetLeft)??0,j=(p==null?void 0:p.offsetTop)??0,P=be(o,{position:"fixed",overflow:"hidden",top:`${-(b-Math.floor(j))}px`,left:`${-(C-Math.floor(w))}px`,right:"0",[u]:`${a}px`});return()=>{P==null||P(),t.scrollTo({left:C,top:b,behavior:"instant"})}},E=[d(),We()?F():m()];return()=>{E.forEach(C=>C==null?void 0:C()),o.removeAttribute(ae)}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Pe=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Q=Pe.join(","),Ne=typeof Element>"u",M=Ne?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,z=!Ne&&Element.prototype.getRootNode?function(r){var e;return r==null||(e=r.getRootNode)===null||e===void 0?void 0:e.call(r)}:function(r){return r==null?void 0:r.ownerDocument},ee=function r(e,t){var n;t===void 0&&(t=!0);var o=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),c=o===""||o==="true",a=c||t&&e&&r(e.parentNode);return a},gt=function(e){var t,n=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return n===""||n==="true"},Ce=function(e,t,n){if(ee(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(Q));return t&&M.call(e,Q)&&o.unshift(e),o=o.filter(n),o},Fe=function r(e,t,n){for(var o=[],c=Array.from(e);c.length;){var a=c.shift();if(!ee(a,!1))if(a.tagName==="SLOT"){var d=a.assignedElements(),u=d.length?d:a.children,m=r(u,!0,n);n.flatten?o.push.apply(o,m):o.push({scopeParent:a,candidates:m})}else{var F=M.call(a,Q);F&&n.filter(a)&&(t||!e.includes(a))&&o.push(a);var E=a.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(a),C=!ee(E,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(a));if(E&&C){var b=r(E===!0?a.children:E.children,!0,n);n.flatten?o.push.apply(o,b):o.push({scopeParent:a,candidates:b})}else c.unshift.apply(c,a.children)}}return o},Ie=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},K=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||gt(e))&&!Ie(e)?0:e.tabIndex},bt=function(e,t){var n=K(e);return n<0&&t&&!Ie(e)?0:n},mt=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Oe=function(e){return e.tagName==="INPUT"},ht=function(e){return Oe(e)&&e.type==="hidden"},yt=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return t},Et=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},wt=function(e){if(!e.name)return!0;var t=e.form||z(e),n=function(d){return t.querySelectorAll('input[type="radio"][name="'+d+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=n(window.CSS.escape(e.name));else try{o=n(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var c=Et(o,e.form);return!c||c===e},Tt=function(e){return Oe(e)&&e.type==="radio"},Pt=function(e){return Tt(e)&&!wt(e)},Nt=function(e){var t,n=e&&z(e),o=(t=n)===null||t===void 0?void 0:t.host,c=!1;if(n&&n!==e){var a,d,u;for(c=!!((a=o)!==null&&a!==void 0&&(d=a.ownerDocument)!==null&&d!==void 0&&d.contains(o)||e!=null&&(u=e.ownerDocument)!==null&&u!==void 0&&u.contains(e));!c&&o;){var m,F,E;n=z(o),o=(m=n)===null||m===void 0?void 0:m.host,c=!!((F=o)!==null&&F!==void 0&&(E=F.ownerDocument)!==null&&E!==void 0&&E.contains(o))}}return c},me=function(e){var t=e.getBoundingClientRect(),n=t.width,o=t.height;return n===0&&o===0},Ct=function(e,t){var n=t.displayCheck,o=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var c=M.call(e,"details>summary:first-of-type"),a=c?e.parentElement:e;if(M.call(a,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof o=="function"){for(var d=e;e;){var u=e.parentElement,m=z(e);if(u&&!u.shadowRoot&&o(u)===!0)return me(e);e.assignedSlot?e=e.assignedSlot:!u&&m!==e.ownerDocument?e=m.host:e=u}e=d}if(Nt(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return me(e);return!1},Ft=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var n=0;n<t.children.length;n++){var o=t.children.item(n);if(o.tagName==="LEGEND")return M.call(t,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}t=t.parentElement}return!1},te=function(e,t){return!(t.disabled||ee(t)||ht(t)||Ct(t,e)||yt(t)||Ft(t))},se=function(e,t){return!(Pt(t)||K(t)<0||!te(e,t))},It=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Ot=function r(e){var t=[],n=[];return e.forEach(function(o,c){var a=!!o.scopeParent,d=a?o.scopeParent:o,u=bt(d,a),m=a?r(o.candidates):d;u===0?a?t.push.apply(t,m):t.push(d):n.push({documentOrder:c,tabIndex:u,item:o,isScope:a,content:m})}),n.sort(mt).reduce(function(o,c){return c.isScope?o.push.apply(o,c.content):o.push(c.content),o},[]).concat(t)},St=function(e,t){t=t||{};var n;return t.getShadowRoot?n=Fe([e],t.includeContainer,{filter:se.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:It}):n=Ce(e,t.includeContainer,se.bind(null,t)),Ot(n)},Rt=function(e,t){t=t||{};var n;return t.getShadowRoot?n=Fe([e],t.includeContainer,{filter:te.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):n=Ce(e,t.includeContainer,te.bind(null,t)),n},G=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return M.call(e,Q)===!1?!1:se(t,e)},Dt=Pe.concat("iframe").join(","),ie=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return M.call(e,Dt)===!1?!1:te(t,e)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function he(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function ye(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?he(Object(t),!0).forEach(function(n){kt(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function kt(r,e,t){return e=Lt(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function At(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Lt(r){var e=At(r,"string");return typeof e=="symbol"?e:String(e)}var Ee={activateTrap:function(e,t){if(e.length>0){var n=e[e.length-1];n!==t&&n.pause()}var o=e.indexOf(t);o===-1||e.splice(o,1),e.push(t)},deactivateTrap:function(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}},xt=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},jt=function(e){return(e==null?void 0:e.key)==="Escape"||(e==null?void 0:e.key)==="Esc"||(e==null?void 0:e.keyCode)===27},_=function(e){return(e==null?void 0:e.key)==="Tab"||(e==null?void 0:e.keyCode)===9},Bt=function(e){return _(e)&&!e.shiftKey},Kt=function(e){return _(e)&&e.shiftKey},we=function(e){return setTimeout(e,0)},Te=function(e,t){var n=-1;return e.every(function(o,c){return t(o)?(n=c,!1):!0}),n},Y=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return typeof e=="function"?e.apply(void 0,n):e},J=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Mt=[],Gt=function(e,t){var n=(t==null?void 0:t.document)||document,o=(t==null?void 0:t.trapStack)||Mt,c=ye({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Bt,isKeyBackward:Kt},t),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},d,u=function(s,i,l){return s&&s[i]!==void 0?s[i]:c[l||i]},m=function(s,i){var l=typeof(i==null?void 0:i.composedPath)=="function"?i.composedPath():void 0;return a.containerGroups.findIndex(function(v){var g=v.container,y=v.tabbableNodes;return g.contains(s)||(l==null?void 0:l.includes(g))||y.find(function(N){return N===s})})},F=function(s){var i=c[s];if(typeof i=="function"){for(var l=arguments.length,v=new Array(l>1?l-1:0),g=1;g<l;g++)v[g-1]=arguments[g];i=i.apply(void 0,v)}if(i===!0&&(i=void 0),!i){if(i===void 0||i===!1)return i;throw new Error("`".concat(s,"` was specified but was not a node, or did not return a node"))}var y=i;if(typeof i=="string"&&(y=n.querySelector(i),!y))throw new Error("`".concat(s,"` as selector refers to no known node"));return y},E=function(){var s=F("initialFocus");if(s===!1)return!1;if(s===void 0||!ie(s,c.tabbableOptions))if(m(n.activeElement)>=0)s=n.activeElement;else{var i=a.tabbableGroups[0],l=i&&i.firstTabbableNode;s=l||F("fallbackFocus")}if(!s)throw new Error("Your focus-trap needs to have at least one focusable element");return s},C=function(){if(a.containerGroups=a.containers.map(function(s){var i=St(s,c.tabbableOptions),l=Rt(s,c.tabbableOptions),v=i.length>0?i[0]:void 0,g=i.length>0?i[i.length-1]:void 0,y=l.find(function(I){return G(I)}),N=l.slice().reverse().find(function(I){return G(I)}),S=!!i.find(function(I){return K(I)>0});return{container:s,tabbableNodes:i,focusableNodes:l,posTabIndexesFound:S,firstTabbableNode:v,lastTabbableNode:g,firstDomTabbableNode:y,lastDomTabbableNode:N,nextTabbableNode:function(B){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,A=i.indexOf(B);return A<0?U?l.slice(l.indexOf(B)+1).find(function(q){return G(q)}):l.slice(0,l.indexOf(B)).reverse().find(function(q){return G(q)}):i[A+(U?1:-1)]}}}),a.tabbableGroups=a.containerGroups.filter(function(s){return s.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!F("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find(function(s){return s.posTabIndexesFound})&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},b=function h(s){var i=s.activeElement;if(i)return i.shadowRoot&&i.shadowRoot.activeElement!==null?h(i.shadowRoot):i},p=function h(s){if(s!==!1&&s!==b(document)){if(!s||!s.focus){h(E());return}s.focus({preventScroll:!!c.preventScroll}),a.mostRecentlyFocusedNode=s,xt(s)&&s.select()}},w=function(s){var i=F("setReturnFocus",s);return i||(i===!1?!1:s)},j=function(s){var i=s.target,l=s.event,v=s.isBackward,g=v===void 0?!1:v;i=i||J(l),C();var y=null;if(a.tabbableGroups.length>0){var N=m(i,l),S=N>=0?a.containerGroups[N]:void 0;if(N<0)g?y=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:y=a.tabbableGroups[0].firstTabbableNode;else if(g){var I=Te(a.tabbableGroups,function(ne){var oe=ne.firstTabbableNode;return i===oe});if(I<0&&(S.container===i||ie(i,c.tabbableOptions)&&!G(i,c.tabbableOptions)&&!S.nextTabbableNode(i,!1))&&(I=N),I>=0){var B=I===0?a.tabbableGroups.length-1:I-1,U=a.tabbableGroups[B];y=K(i)>=0?U.lastTabbableNode:U.lastDomTabbableNode}else _(l)||(y=S.nextTabbableNode(i,!1))}else{var A=Te(a.tabbableGroups,function(ne){var oe=ne.lastTabbableNode;return i===oe});if(A<0&&(S.container===i||ie(i,c.tabbableOptions)&&!G(i,c.tabbableOptions)&&!S.nextTabbableNode(i))&&(A=N),A>=0){var q=A===a.tabbableGroups.length-1?0:A+1,pe=a.tabbableGroups[q];y=K(i)>=0?pe.firstTabbableNode:pe.firstDomTabbableNode}else _(l)||(y=S.nextTabbableNode(i))}}else y=F("fallbackFocus");return y},P=function(s){var i=J(s);if(!(m(i,s)>=0)){if(Y(c.clickOutsideDeactivates,s)){d.deactivate({returnFocus:c.returnFocusOnDeactivate});return}Y(c.allowOutsideClick,s)||s.preventDefault()}},H=function(s){var i=J(s),l=m(i,s)>=0;if(l||i instanceof Document)l&&(a.mostRecentlyFocusedNode=i);else{s.stopImmediatePropagation();var v,g=!0;if(a.mostRecentlyFocusedNode)if(K(a.mostRecentlyFocusedNode)>0){var y=m(a.mostRecentlyFocusedNode),N=a.containerGroups[y].tabbableNodes;if(N.length>0){var S=N.findIndex(function(I){return I===a.mostRecentlyFocusedNode});S>=0&&(c.isKeyForward(a.recentNavEvent)?S+1<N.length&&(v=N[S+1],g=!1):S-1>=0&&(v=N[S-1],g=!1))}}else a.containerGroups.some(function(I){return I.tabbableNodes.some(function(B){return K(B)>0})})||(g=!1);else g=!1;g&&(v=j({target:a.mostRecentlyFocusedNode,isBackward:c.isKeyBackward(a.recentNavEvent)})),p(v||a.mostRecentlyFocusedNode||E())}a.recentNavEvent=void 0},Be=function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;a.recentNavEvent=s;var l=j({event:s,isBackward:i});l&&(_(s)&&s.preventDefault(),p(l))},le=function(s){if(jt(s)&&Y(c.escapeDeactivates,s)!==!1){s.preventDefault(),d.deactivate();return}(c.isKeyForward(s)||c.isKeyBackward(s))&&Be(s,c.isKeyBackward(s))},ue=function(s){var i=J(s);m(i,s)>=0||Y(c.clickOutsideDeactivates,s)||Y(c.allowOutsideClick,s)||(s.preventDefault(),s.stopImmediatePropagation())},de=function(){if(a.active)return Ee.activateTrap(o,d),a.delayInitialFocusTimer=c.delayInitialFocus?we(function(){p(E())}):p(E()),n.addEventListener("focusin",H,!0),n.addEventListener("mousedown",P,{capture:!0,passive:!1}),n.addEventListener("touchstart",P,{capture:!0,passive:!1}),n.addEventListener("click",ue,{capture:!0,passive:!1}),n.addEventListener("keydown",le,{capture:!0,passive:!1}),d},fe=function(){if(a.active)return n.removeEventListener("focusin",H,!0),n.removeEventListener("mousedown",P,!0),n.removeEventListener("touchstart",P,!0),n.removeEventListener("click",ue,!0),n.removeEventListener("keydown",le,!0),d},Ke=function(s){var i=s.some(function(l){var v=Array.from(l.removedNodes);return v.some(function(g){return g===a.mostRecentlyFocusedNode})});i&&p(E())},re=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(Ke):void 0,W=function(){re&&(re.disconnect(),a.active&&!a.paused&&a.containers.map(function(s){re.observe(s,{subtree:!0,childList:!0})}))};return d={get active(){return a.active},get paused(){return a.paused},activate:function(s){if(a.active)return this;var i=u(s,"onActivate"),l=u(s,"onPostActivate"),v=u(s,"checkCanFocusTrap");v||C(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=n.activeElement,i==null||i();var g=function(){v&&C(),de(),W(),l==null||l()};return v?(v(a.containers.concat()).then(g,g),this):(g(),this)},deactivate:function(s){if(!a.active)return this;var i=ye({onDeactivate:c.onDeactivate,onPostDeactivate:c.onPostDeactivate,checkCanReturnFocus:c.checkCanReturnFocus},s);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,fe(),a.active=!1,a.paused=!1,W(),Ee.deactivateTrap(o,d);var l=u(i,"onDeactivate"),v=u(i,"onPostDeactivate"),g=u(i,"checkCanReturnFocus"),y=u(i,"returnFocus","returnFocusOnDeactivate");l==null||l();var N=function(){we(function(){y&&p(w(a.nodeFocusedBeforeActivation)),v==null||v()})};return y&&g?(g(w(a.nodeFocusedBeforeActivation)).then(N,N),this):(N(),this)},pause:function(s){if(a.paused||!a.active)return this;var i=u(s,"onPause"),l=u(s,"onPostPause");return a.paused=!0,i==null||i(),fe(),W(),l==null||l(),this},unpause:function(s){if(!a.paused||!a.active)return this;var i=u(s,"onUnpause"),l=u(s,"onPostUnpause");return a.paused=!1,i==null||i(),C(),de(),W(),l==null||l(),this},updateContainerElements:function(s){var i=[].concat(s).filter(Boolean);return a.containers=i.map(function(l){return typeof l=="string"?n.querySelector(l):l}),a.active&&C(),W(),this}},d.updateContainerElements(e),d};const[$t,x]=Ue({name:"PopoverContext",hookName:"usePopoverContext",providerName:"<PopoverProvider />"}),Se=O.forwardRef((r,e)=>{const t=x(),n=k(t.getArrowProps(),r);return T.jsx(L.div,{...n,ref:e})});Se.displayName="PopoverArrow";const Re=O.forwardRef((r,e)=>{const t=x(),n=k(t.getArrowTipProps(),r);return T.jsx(L.div,{...n,ref:e})});Re.displayName="PopoverArrowTip";const De=O.forwardRef((r,e)=>{const t=x(),n=k(t.getCloseTriggerProps(),r);return T.jsx(L.button,{...n,ref:e})});De.displayName="PopoverCloseTrigger";const ke=O.forwardRef((r,e)=>{const t=x(),n=ce(),o=k(t.getContentProps(),n.getPresenceProps(e),r);return n.unmounted?null:T.jsx(L.div,{...o})});ke.displayName="PopoverContent";const Ae=O.forwardRef((r,e)=>{const t=x(),n=k(t.getDescriptionProps(),r);return T.jsx(L.div,{...n,ref:e})});Ae.displayName="PopoverDescription";const Le=O.forwardRef((r,e)=>{const t=x(),n=ce(),o=k(t.getPositionerProps(),r);return n.unmounted?null:T.jsx(L.div,{...o,ref:e})});Le.displayName="PopoverPositioner";var Vt=qe("popover").parts("arrow","arrowTip","anchor","trigger","indicator","positioner","content","title","description","closeTrigger"),D=Vt.build(),f=Xe({getAnchorId:r=>{var e;return((e=r.ids)==null?void 0:e.anchor)??`popover:${r.id}:anchor`},getTriggerId:r=>{var e;return((e=r.ids)==null?void 0:e.trigger)??`popover:${r.id}:trigger`},getContentId:r=>{var e;return((e=r.ids)==null?void 0:e.content)??`popover:${r.id}:content`},getPositionerId:r=>{var e;return((e=r.ids)==null?void 0:e.positioner)??`popover:${r.id}:popper`},getArrowId:r=>{var e;return((e=r.ids)==null?void 0:e.arrow)??`popover:${r.id}:arrow`},getTitleId:r=>{var e;return((e=r.ids)==null?void 0:e.title)??`popover:${r.id}:title`},getDescriptionId:r=>{var e;return((e=r.ids)==null?void 0:e.description)??`popover:${r.id}:desc`},getCloseTriggerId:r=>{var e;return((e=r.ids)==null?void 0:e.closeTrigger)??`popover:${r.id}:close`},getAnchorEl:r=>f.getById(r,f.getAnchorId(r)),getTriggerEl:r=>f.getById(r,f.getTriggerId(r)),getContentEl:r=>f.getById(r,f.getContentId(r)),getPositionerEl:r=>f.getById(r,f.getPositionerId(r)),getTitleEl:r=>f.getById(r,f.getTitleId(r)),getDescriptionEl:r=>f.getById(r,f.getDescriptionId(r)),getFocusableEls:r=>Ye(f.getContentEl(r)),getFirstFocusableEl:r=>f.getFocusableEls(r)[0]});function Wt(r,e,t){const n=r.matches("open"),o=r.context.currentPlacement,c=r.context.currentPortalled,a=r.context.renderedElements,d=nt({...r.context.positioning,placement:o});return{portalled:c,open:n,setOpen(u){u!==n&&e(u?"OPEN":"CLOSE")},reposition(u={}){e({type:"POSITIONING.SET",options:u})},getArrowProps(){return t.element({id:f.getArrowId(r.context),...D.arrow.attrs,dir:r.context.dir,style:d.arrow})},getArrowTipProps(){return t.element({...D.arrowTip.attrs,dir:r.context.dir,style:d.arrowTip})},getAnchorProps(){return t.element({...D.anchor.attrs,dir:r.context.dir,id:f.getAnchorId(r.context)})},getTriggerProps(){return t.button({...D.trigger.attrs,dir:r.context.dir,type:"button","data-placement":o,id:f.getTriggerId(r.context),"aria-haspopup":"dialog","aria-expanded":n,"data-state":n?"open":"closed","aria-controls":f.getContentId(r.context),onClick(u){u.defaultPrevented||e("TOGGLE")},onBlur(u){e({type:"TRIGGER_BLUR",target:u.relatedTarget})}})},getIndicatorProps(){return t.element({...D.indicator.attrs,dir:r.context.dir,"data-state":n?"open":"closed"})},getPositionerProps(){return t.element({id:f.getPositionerId(r.context),...D.positioner.attrs,dir:r.context.dir,style:d.floating})},getContentProps(){return t.element({...D.content.attrs,dir:r.context.dir,id:f.getContentId(r.context),tabIndex:-1,role:"dialog",hidden:!n,"data-state":n?"open":"closed","data-expanded":_e(n),"aria-labelledby":a.title?f.getTitleId(r.context):void 0,"aria-describedby":a.description?f.getDescriptionId(r.context):void 0,"data-placement":o})},getTitleProps(){return t.element({...D.title.attrs,id:f.getTitleId(r.context),dir:r.context.dir})},getDescriptionProps(){return t.element({...D.description.attrs,id:f.getDescriptionId(r.context),dir:r.context.dir})},getCloseTriggerProps(){return t.button({...D.closeTrigger.attrs,dir:r.context.dir,id:f.getCloseTriggerId(r.context),type:"button","aria-label":"close",onClick(u){u.defaultPrevented||e("CLOSE")}})}}}function Ut(r){const e=it(r);return He({id:"popover",initial:e.open?"open":"closed",context:{closeOnInteractOutside:!0,closeOnEscape:!0,autoFocus:!0,modal:!1,portalled:!0,positioning:{placement:"bottom",...e.positioning},currentPlacement:void 0,...e,renderedElements:{title:!0,description:!0}},computed:{currentPortalled:t=>!!t.modal||!!t.portalled},watch:{open:["toggleVisibility"]},entry:["checkRenderedElements"],states:{closed:{on:{"CONTROLLED.OPEN":{target:"open",actions:["setInitialFocus"]},TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus"]}]}},open:{activities:["trapFocus","preventScroll","hideContentBelow","trackPositioning","trackDismissableElement","proxyTabFocus"],on:{"CONTROLLED.CLOSE":{target:"closed",actions:["setFinalFocus"]},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose","setFinalFocus"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"POSITIONING.SET":{actions:"reposition"}}}}},{guards:{isOpenControlled:t=>!!t["open.controlled"]},activities:{trackPositioning(t){t.currentPlacement=t.positioning.placement;const n=f.getAnchorEl(t)??f.getTriggerEl(t);return ge(n,()=>f.getPositionerEl(t),{...t.positioning,defer:!0,onComplete(c){t.currentPlacement=c.placement}})},trackDismissableElement(t,n,{send:o}){const c=()=>f.getContentEl(t);let a=!0;return at(c,{pointerBlocking:t.modal,exclude:f.getTriggerEl(t),defer:!0,onEscapeKeyDown(d){var u;(u=t.onEscapeKeyDown)==null||u.call(t,d),!t.closeOnEscape&&d.preventDefault()},onInteractOutside(d){var u;(u=t.onInteractOutside)==null||u.call(t,d),!d.defaultPrevented&&(a=!(d.detail.focusable||d.detail.contextmenu),t.closeOnInteractOutside||d.preventDefault())},onPointerDownOutside:t.onPointerDownOutside,onFocusOutside:t.onFocusOutside,persistentElements:t.persistentElements,onDismiss(){o({type:"CLOSE",src:"interact-outside",restoreFocus:a})}})},proxyTabFocus(t){return t.modal||!t.portalled?void 0:Je(()=>f.getContentEl(t),{triggerElement:f.getTriggerEl(t),defer:!0,onFocus(o){o.focus({preventScroll:!0})}})},hideContentBelow(t){return t.modal?dt(()=>[f.getContentEl(t),f.getTriggerEl(t)],{defer:!0}):void 0},preventScroll(t){if(t.modal)return vt(f.getDoc(t))},trapFocus(t){if(!t.modal)return;let n;return Ze(()=>{const o=f.getContentEl(t);if(o){n=Gt(o,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,document:f.getDoc(t),fallbackFocus:o,initialFocus:ve({root:f.getContentEl(t),getInitialEl:t.initialFocusEl,enabled:t.autoFocus})});try{n.activate()}catch{}}}),()=>n==null?void 0:n.deactivate()}},actions:{reposition(t,n){const o=f.getAnchorEl(t)??f.getTriggerEl(t);ge(o,()=>f.getPositionerEl(t),{...t.positioning,...n.options,defer:!0,listeners:!1,onComplete(a){t.currentPlacement=a.placement}})},checkRenderedElements(t){Z(()=>{Object.assign(t.renderedElements,{title:!!f.getTitleEl(t),description:!!f.getDescriptionEl(t)})})},setInitialFocus(t){t.modal||Z(()=>{const n=ve({root:f.getContentEl(t),getInitialEl:t.initialFocusEl,enabled:t.autoFocus});n==null||n.focus({preventScroll:!0})})},setFinalFocus(t,n){n.restoreFocus&&Z(()=>{const o=f.getTriggerEl(t);o==null||o.focus({preventScroll:!0})})},invokeOnOpen(t){var n;(n=t.onOpenChange)==null||n.call(t,{open:!0})},invokeOnClose(t){var n;(n=t.onOpenChange)==null||n.call(t,{open:!1})},toggleVisibility(t,n,{send:o}){o({type:t.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:n})}}})}Qe()(["autoFocus","closeOnEscape","closeOnInteractOutside","dir","getRootNode","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","portalled","positioning"]);const qt=(r={})=>{const{getRootNode:e}=st(),{dir:t}=ct(),n={id:O.useId(),dir:t,getRootNode:e,open:r.defaultOpen,"open.controlled":r.open!==void 0,...r},o={...n,open:r.open,onOpenChange:lt(r.onOpenChange,{sync:!0})},[c,a]=ze(Ut(n),{context:o});return Wt(c,a,et)},Xt=r=>{const[e,{children:t,...n}]=ot(r),o=qt(n),c=tt(k({present:o.open},e));return T.jsx($t,{value:o,children:T.jsx(rt,{value:c,children:t})})},xe=O.forwardRef((r,e)=>{const t=x(),n=k(t.getTitleProps(),r);return T.jsx(L.div,{...n,ref:e})});xe.displayName="PopoverTitle";const je=O.forwardRef((r,e)=>{const t=x(),n=ce(),o=k({...t.getTriggerProps(),"aria-controls":n.unmounted?void 0:t.getTriggerProps()["aria-controls"]},r);return T.jsx(L.button,{...o,ref:e})});je.displayName="PopoverTrigger";const Yt=Me({base:`${Ge.scope} popover`,slots:{positioner:"trds-relative",content:"trds-relative trds-bg-white trds-rounded-lg trds-shadow-lg trds-flex trds-flex-col trds-max-w-sm trds-z-popover trds-p-4 data-open:trds-animate-fade-in data-closed:trds-animate-fade-out data-hidden:trds-hidden",title:"trds-font-medium trds-text-sm trds-mb-4",description:"trds-text-fg-description trds-text-sm",closeTrigger:"trds-text-fg-description trds-absolute trds-right-2 trds-top-2",trigger:"",arrow:"[--arrow-size:8px] [--arrow-background:#fff]",arrowTip:"trds-border-layer1 trds-border-t trds-border-l"}}),[_t,V]=$e({name:"popover",hookName:"usePopoverContext",providerName:"PopoverProvider",defaultValue:{classes:{},portalled:!1}});function Ht(r){const{portalled:e,children:t,...n}=r,c={classes:Yt(),portalled:e};return T.jsx(_t,{value:c,children:T.jsx(Xt,{portalled:e,...n,children:t})})}const Jt=O.forwardRef(function(r,e){const{classes:t}=V(),{children:n,className:o,...c}=r;return T.jsx(je,{className:$(t.trigger(),o),ref:e,...c,children:n})}),Zt=O.forwardRef(function(r,e){const{classes:t,portalled:n}=V(),{children:o,className:c,...a}=r,d=n?Ve:O.Fragment;return T.jsx(d,{children:T.jsx(Le,{children:T.jsx(ke,{className:$(t.content(),c),ref:e,...a,children:o})})})}),Qt=O.forwardRef(function(r,e){const{classes:t}=V(),{children:n,className:o,...c}=r;return T.jsx(Se,{className:$(t.arrow(),o),...c,ref:e,children:T.jsx(Re,{className:t.arrowTip()})})}),zt=O.forwardRef(function(r,e){const{classes:t}=V(),{children:n,className:o,...c}=r;return T.jsx(xe,{className:$(t.title(),o),...c,ref:e,children:n})}),er=O.forwardRef(function(r,e){const{classes:t}=V(),{children:n,className:o,...c}=r;return T.jsx(Ae,{className:$(t.description(),o),...c,ref:e,children:n})}),tr=O.forwardRef(function(r,e){const{classes:t}=V(),{children:n,className:o,...c}=r;return T.jsx(De,{className:$(t.closeTrigger(),o),ref:e,...c,children:n})});Ht.__docgenInfo={description:"",methods:[],displayName:"Root"};Jt.__docgenInfo={description:"",methods:[],displayName:"Trigger"};Zt.__docgenInfo={description:"",methods:[],displayName:"Content"};tr.__docgenInfo={description:"",methods:[],displayName:"CloseTrigger"};zt.__docgenInfo={description:"",methods:[],displayName:"Title"};er.__docgenInfo={description:"",methods:[],displayName:"Description"};Qt.__docgenInfo={description:"",methods:[],displayName:"Arrow"};export{Qt as A,Zt as C,er as D,Ht as R,Jt as T,zt as a,tr as b,dt as c,Gt as d,vt as p};
