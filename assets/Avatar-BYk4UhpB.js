import{j as i}from"./jsx-runtime-qGIIFXMu.js";import{f as y}from"./index-DOljKnny.js";import{r as c}from"./index-CDs2tPxN.js";import{c as A}from"./cva-C095pwBQ.js";import{s as C}from"./sva-CxSEfBjn.js";import{d as N,e as S,f as O,z as P,m as u,h as p,k as M,l as w,o as G,p as x,q as L,A as j,B as $,v as D,u as F,w as U,x as B,y as _,j as H}from"./use-event-BRqgqnOD.js";import{c as T}from"./createLucideIcon-zijr-BYg.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=T("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var f=N("avatar").parts("root","image","fallback");f.build();var g=S({getRootId:a=>{var t;return((t=a.ids)==null?void 0:t.root)??`avatar:${a.id}`},getImageId:a=>{var t;return((t=a.ids)==null?void 0:t.image)??`avatar:${a.id}:image`},getFallbackId:a=>{var t;return((t=a.ids)==null?void 0:t.fallback)??`avatar:${a.id}:fallback`},getRootEl:a=>g.getById(a,g.getRootId(a)),getImageEl:a=>g.getById(a,g.getImageId(a))});O()(["dir","id","ids","onStatusChange","getRootNode"]);const[V,k]=P({name:"AvatarContext",hookName:"useAvatarContext",providerName:"<AvatarProvider />"}),R=c.forwardRef((a,t)=>{const e=k(),r=u(e.getFallbackProps(),a);return i.jsx(p.span,{...r,ref:t})});R.displayName="AvatarFallback";const b=c.forwardRef((a,t)=>{const e=k(),r=u(e.getImageProps(),a);return i.jsx(p.img,{...r,ref:t})});b.displayName="AvatarImage";var q=M("avatar").parts("root","image","fallback"),v=q.build(),n=w({getRootId:a=>{var t;return((t=a.ids)==null?void 0:t.root)??`avatar:${a.id}`},getImageId:a=>{var t;return((t=a.ids)==null?void 0:t.image)??`avatar:${a.id}:image`},getFallbackId:a=>{var t;return((t=a.ids)==null?void 0:t.fallback)??`avatar:${a.id}:fallback`},getRootEl:a=>n.getById(a,n.getRootId(a)),getImageEl:a=>n.getById(a,n.getImageId(a))});function W(a,t,e){const r=a.matches("loaded");return{loaded:r,setSrc(s){t({type:"SRC.SET",src:s})},setLoaded(){t({type:"IMG.LOADED",src:"api"})},setError(){t({type:"IMG.ERROR",src:"api"})},getRootProps(){return e.element({...v.root.attrs,dir:a.context.dir,id:n.getRootId(a.context)})},getImageProps(){return e.img({...v.image.attrs,hidden:!r,dir:a.context.dir,id:n.getImageId(a.context),"data-state":r?"visible":"hidden",onLoad(){t({type:"IMG.LOADED",src:"element"})},onError(){t({type:"IMG.ERROR",src:"element"})}})},getFallbackProps(){return e.element({...v.fallback.attrs,dir:a.context.dir,id:n.getFallbackId(a.context),hidden:r,"data-state":r?"hidden":"visible"})}}}function J(a){const t=G(a);return x({id:"avatar",initial:"loading",activities:["trackImageRemoval"],context:t,on:{"SRC.CHANGE":{target:"loading"},"IMG.UNMOUNT":{target:"error"}},states:{loading:{activities:["trackSrcChange"],entry:["checkImageStatus"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]},"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}},error:{activities:["trackSrcChange"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]}}},loaded:{activities:["trackSrcChange"],on:{"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}}}},{activities:{trackSrcChange(e,r,{send:s}){const o=n.getImageEl(e);return j(o,{attributes:["src","srcset"],callback(){s({type:"SRC.CHANGE"})}})},trackImageRemoval(e,r,{send:s}){const o=n.getRootEl(e);return $(o,{callback(d){Array.from(d[0].removedNodes).find(l=>l.matches("[data-scope=avatar][data-part=image]"))&&s({type:"IMG.UNMOUNT"})}})}},actions:{invokeOnLoad(e){var r;(r=e.onStatusChange)==null||r.call(e,{status:"loaded"})},invokeOnError(e){var r;(r=e.onStatusChange)==null||r.call(e,{status:"error"})},checkImageStatus(e,r,{send:s}){const o=n.getImageEl(e);if(o!=null&&o.complete){const d=K(o)?"IMG.LOADED":"IMG.ERROR";s({type:d,src:"ssr"})}}}})}function K(a){return a.complete&&a.naturalWidth!==0&&a.naturalHeight!==0}L()(["dir","id","ids","onStatusChange","getRootNode"]);const Q=(a={})=>{const{getRootNode:t}=D(),{dir:e}=F(),r={id:c.useId(),dir:e,getRootNode:t,...a},s={...r,onStatusChange:U(a.onStatusChange)},[o,d]=B(J(r),{context:s});return W(o,d,_)},E=c.forwardRef((a,t)=>{const[e,r]=H()(a,["id","ids","onStatusChange"]),s=Q(e),o=u(s.getRootProps(),r);return i.jsx(V,{value:s,children:i.jsx(p.div,{...o,ref:t})})});E.displayName="AvatarRoot";const X=C({className:"avatar",slots:f.keys(),base:{root:{rounded:"full",overflow:"hidden"},fallback:{bg:"neutral.200"},image:{bg:"neutral.200"}},variants:{size:{sm:{root:{w:8,h:8},fallback:{w:8,h:8},image:{w:8,h:8}},md:{root:{w:10,h:10},fallback:{w:10,h:10},image:{w:10,h:10}},lg:{root:{w:12,h:12},fallback:{w:12,h:12},image:{w:12,h:12}}}},defaultVariants:{size:"md"}}),Y=c.forwardRef((a,t)=>{const{fallback:e,src:r,alt:s,size:o,className:d,children:m,...h}=a,l=X({size:o}),I=m&&c.Children.only(m);return i.jsxs(E,{ref:t,className:A(l.root,d),...h,children:[i.jsx(b,{src:r,alt:s,className:l.image,asChild:y(I),children:I}),i.jsx(R,{className:l.fallback,asChild:!0,children:e??i.jsx(z,{size:Z(o)})})]})}),Z=a=>a==="sm"?32:a==="md"?40:a==="lg"?48:10;Y.__docgenInfo={description:"",methods:[],displayName:"Avatar"};export{Y as A,z as U};
