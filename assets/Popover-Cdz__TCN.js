import{j as a}from"./jsx-runtime-qGIIFXMu.js";import{I as R}from"./index-9MS2e6do.js";import{r as c}from"./index-CDs2tPxN.js";import{c as k}from"./create-react-context-Dw26gLIP.js";import{t as j,c as f}from"./tv-Br1lVx4G.js";import{P as A}from"./portal-BWW2K-Dr.js";import{c as S,m as u,h as m,a as L,b as x,Q as _,d as B,e as $,X as G,n as V,r as E,f as K,T as O,A as M,E as H}from"./factory-BCO0_PXk.js";import{a as C,u as Q,P as U}from"./use-presence-BYwEg9-n.js";import{s as W}from"./split-presence-props-DcTE3k_W.js";import{g as X,a as T}from"./index-CdZdUDHv.js";import{a as q}from"./index-lb5DGD3A.js";import{a as J}from"./index-BTGRfmW-.js";import{p as Y,c as Z}from"./focus-trap.esm-PH5MDpJx.js";import{c as z}from"./index-B1LdDssV.js";import{u as ee,a as oe}from"./use-locale-context-CTaGYWMe.js";import{u as te}from"./use-event-eGuf5zsd.js";const[re,P]=S({name:"PopoverContext",hookName:"usePopoverContext",providerName:"<PopoverProvider />"}),I=c.forwardRef((o,r)=>{const e=P(),t=u(e.getArrowProps(),o);return a.jsx(m.div,{...t,ref:r})});I.displayName="PopoverArrow";const h=c.forwardRef((o,r)=>{const e=P(),t=u(e.getArrowTipProps(),o);return a.jsx(m.div,{...t,ref:r})});h.displayName="PopoverArrowTip";const w=c.forwardRef((o,r)=>{const e=P(),t=u(e.getCloseTriggerProps(),o);return a.jsx(m.button,{...t,ref:r})});w.displayName="PopoverCloseTrigger";const y=c.forwardRef((o,r)=>{const e=P(),t=C(),s=u(e.getContentProps(),t.getPresenceProps(r),o);return t.unmounted?null:a.jsx(m.div,{...s})});y.displayName="PopoverContent";const N=c.forwardRef((o,r)=>{const e=P(),t=u(e.getDescriptionProps(),o);return a.jsx(m.div,{...t,ref:r})});N.displayName="PopoverDescription";const b=c.forwardRef((o,r)=>{const e=P(),t=C(),s=u(e.getPositionerProps(),o);return t.unmounted?null:a.jsx(m.div,{...s,ref:r})});b.displayName="PopoverPositioner";var ne=L("popover").parts("arrow","arrowTip","anchor","trigger","indicator","positioner","content","title","description","closeTrigger"),g=ne.build(),n=x({getAnchorId:o=>{var r;return((r=o.ids)==null?void 0:r.anchor)??`popover:${o.id}:anchor`},getTriggerId:o=>{var r;return((r=o.ids)==null?void 0:r.trigger)??`popover:${o.id}:trigger`},getContentId:o=>{var r;return((r=o.ids)==null?void 0:r.content)??`popover:${o.id}:content`},getPositionerId:o=>{var r;return((r=o.ids)==null?void 0:r.positioner)??`popover:${o.id}:popper`},getArrowId:o=>{var r;return((r=o.ids)==null?void 0:r.arrow)??`popover:${o.id}:arrow`},getTitleId:o=>{var r;return((r=o.ids)==null?void 0:r.title)??`popover:${o.id}:title`},getDescriptionId:o=>{var r;return((r=o.ids)==null?void 0:r.description)??`popover:${o.id}:desc`},getCloseTriggerId:o=>{var r;return((r=o.ids)==null?void 0:r.closeTrigger)??`popover:${o.id}:close`},getAnchorEl:o=>n.getById(o,n.getAnchorId(o)),getTriggerEl:o=>n.getById(o,n.getTriggerId(o)),getContentEl:o=>n.getById(o,n.getContentId(o)),getPositionerEl:o=>n.getById(o,n.getPositionerId(o)),getTitleEl:o=>n.getById(o,n.getTitleId(o)),getDescriptionEl:o=>n.getById(o,n.getDescriptionId(o)),getFocusableEls:o=>_(n.getContentEl(o)),getFirstFocusableEl:o=>n.getFocusableEls(o)[0]});function se(o,r,e){const t=o.matches("open"),s=o.context.currentPlacement,i=o.context.currentPortalled,p=o.context.renderedElements,l=X({...o.context.positioning,placement:s});return{portalled:i,open:t,setOpen(d){d!==t&&r(d?"OPEN":"CLOSE")},reposition(d={}){r({type:"POSITIONING.SET",options:d})},getArrowProps(){return e.element({id:n.getArrowId(o.context),...g.arrow.attrs,dir:o.context.dir,style:l.arrow})},getArrowTipProps(){return e.element({...g.arrowTip.attrs,dir:o.context.dir,style:l.arrowTip})},getAnchorProps(){return e.element({...g.anchor.attrs,dir:o.context.dir,id:n.getAnchorId(o.context)})},getTriggerProps(){return e.button({...g.trigger.attrs,dir:o.context.dir,type:"button","data-placement":s,id:n.getTriggerId(o.context),"aria-haspopup":"dialog","aria-expanded":t,"data-state":t?"open":"closed","aria-controls":n.getContentId(o.context),onClick(d){d.defaultPrevented||r("TOGGLE")},onBlur(d){r({type:"TRIGGER_BLUR",target:d.relatedTarget})}})},getIndicatorProps(){return e.element({...g.indicator.attrs,dir:o.context.dir,"data-state":t?"open":"closed"})},getPositionerProps(){return e.element({id:n.getPositionerId(o.context),...g.positioner.attrs,dir:o.context.dir,style:l.floating})},getContentProps(){return e.element({...g.content.attrs,dir:o.context.dir,id:n.getContentId(o.context),tabIndex:-1,role:"dialog",hidden:!t,"data-state":t?"open":"closed","data-expanded":B(t),"aria-labelledby":p.title?n.getTitleId(o.context):void 0,"aria-describedby":p.description?n.getDescriptionId(o.context):void 0,"data-placement":s})},getTitleProps(){return e.element({...g.title.attrs,id:n.getTitleId(o.context),dir:o.context.dir})},getDescriptionProps(){return e.element({...g.description.attrs,id:n.getDescriptionId(o.context),dir:o.context.dir})},getCloseTriggerProps(){return e.button({...g.closeTrigger.attrs,dir:o.context.dir,id:n.getCloseTriggerId(o.context),type:"button","aria-label":"close",onClick(d){d.defaultPrevented||r("CLOSE")}})}}}function ie(o){const r=z(o);return $({id:"popover",initial:r.open?"open":"closed",context:{closeOnInteractOutside:!0,closeOnEscape:!0,autoFocus:!0,modal:!1,portalled:!0,positioning:{placement:"bottom",...r.positioning},currentPlacement:void 0,...r,renderedElements:{title:!0,description:!0}},computed:{currentPortalled:e=>!!e.modal||!!e.portalled},watch:{open:["toggleVisibility"]},entry:["checkRenderedElements"],states:{closed:{on:{"CONTROLLED.OPEN":{target:"open",actions:["setInitialFocus"]},TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus"]}],OPEN:[{guard:"isOpenControlled",actions:["invokeOnOpen"]},{target:"open",actions:["invokeOnOpen","setInitialFocus"]}]}},open:{activities:["trapFocus","preventScroll","hideContentBelow","trackPositioning","trackDismissableElement","proxyTabFocus"],on:{"CONTROLLED.CLOSE":{target:"closed",actions:["setFinalFocus"]},CLOSE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose","setFinalFocus"]}],TOGGLE:[{guard:"isOpenControlled",actions:["invokeOnClose"]},{target:"closed",actions:["invokeOnClose"]}],"POSITIONING.SET":{actions:"reposition"}}}}},{guards:{isOpenControlled:e=>!!e["open.controlled"]},activities:{trackPositioning(e){e.currentPlacement=e.positioning.placement;const t=n.getAnchorEl(e)??n.getTriggerEl(e);return T(t,()=>n.getPositionerEl(e),{...e.positioning,defer:!0,onComplete(i){e.currentPlacement=i.placement}})},trackDismissableElement(e,t,{send:s}){const i=()=>n.getContentEl(e);let p=!0;return J(i,{pointerBlocking:e.modal,exclude:n.getTriggerEl(e),defer:!0,onEscapeKeyDown(l){var d;(d=e.onEscapeKeyDown)==null||d.call(e,l),!e.closeOnEscape&&l.preventDefault()},onInteractOutside(l){var d;(d=e.onInteractOutside)==null||d.call(e,l),!l.defaultPrevented&&(p=!(l.detail.focusable||l.detail.contextmenu),e.closeOnInteractOutside||l.preventDefault())},onPointerDownOutside:e.onPointerDownOutside,onFocusOutside:e.onFocusOutside,persistentElements:e.persistentElements,onDismiss(){s({type:"CLOSE",src:"interact-outside",restoreFocus:p})}})},proxyTabFocus(e){return e.modal||!e.portalled?void 0:G(()=>n.getContentEl(e),{triggerElement:n.getTriggerEl(e),defer:!0,onFocus(s){s.focus({preventScroll:!0})}})},hideContentBelow(e){return e.modal?q(()=>[n.getContentEl(e),n.getTriggerEl(e)],{defer:!0}):void 0},preventScroll(e){if(e.modal)return Y(n.getDoc(e))},trapFocus(e){if(!e.modal)return;let t;return V(()=>{const s=n.getContentEl(e);if(s){t=Z(s,{escapeDeactivates:!1,allowOutsideClick:!0,preventScroll:!0,returnFocusOnDeactivate:!0,document:n.getDoc(e),fallbackFocus:s,initialFocus:O({root:n.getContentEl(e),getInitialEl:e.initialFocusEl,enabled:e.autoFocus})});try{t.activate()}catch{}}}),()=>t==null?void 0:t.deactivate()}},actions:{reposition(e,t){const s=n.getAnchorEl(e)??n.getTriggerEl(e);T(s,()=>n.getPositionerEl(e),{...e.positioning,...t.options,defer:!0,listeners:!1,onComplete(p){e.currentPlacement=p.placement}})},checkRenderedElements(e){E(()=>{Object.assign(e.renderedElements,{title:!!n.getTitleEl(e),description:!!n.getDescriptionEl(e)})})},setInitialFocus(e){e.modal||E(()=>{const t=O({root:n.getContentEl(e),getInitialEl:e.initialFocusEl,enabled:e.autoFocus});t==null||t.focus({preventScroll:!0})})},setFinalFocus(e,t){t.restoreFocus&&E(()=>{const s=n.getTriggerEl(e);s==null||s.focus({preventScroll:!0})})},invokeOnOpen(e){var t;(t=e.onOpenChange)==null||t.call(e,{open:!0})},invokeOnClose(e){var t;(t=e.onOpenChange)==null||t.call(e,{open:!1})},toggleVisibility(e,t,{send:s}){s({type:e.open?"CONTROLLED.OPEN":"CONTROLLED.CLOSE",previousEvent:t})}}})}K()(["autoFocus","closeOnEscape","closeOnInteractOutside","dir","getRootNode","id","ids","initialFocusEl","modal","onEscapeKeyDown","onFocusOutside","onInteractOutside","onOpenChange","onPointerDownOutside","open.controlled","open","persistentElements","portalled","positioning"]);const ae=(o={})=>{const{getRootNode:r}=ee(),{dir:e}=oe(),t={id:c.useId(),dir:e,getRootNode:r,open:o.defaultOpen,"open.controlled":o.open!==void 0,...o},s={...t,open:o.open,onOpenChange:te(o.onOpenChange,{sync:!0})},[i,p]=M(ie(t),{context:s});return se(i,p,H)},de=o=>{const[r,{children:e,...t}]=W(o),s=ae(t),i=Q(u({present:s.open},r));return a.jsx(re,{value:s,children:a.jsx(U,{value:i,children:e})})},F=c.forwardRef((o,r)=>{const e=P(),t=u(e.getTitleProps(),o);return a.jsx(m.div,{...t,ref:r})});F.displayName="PopoverTitle";const D=c.forwardRef((o,r)=>{const e=P(),t=C(),s=u({...e.getTriggerProps(),"aria-controls":t.unmounted?void 0:e.getTriggerProps()["aria-controls"]},o);return a.jsx(m.button,{...s,ref:r})});D.displayName="PopoverTrigger";const ce=j({base:`${R.scope} popover`,slots:{positioner:"trds-relative",content:"trds-relative trds-bg-white trds-rounded-lg trds-shadow-lg trds-flex trds-flex-col trds-max-w-sm trds-z-popover trds-p-4 data-open:trds-animate-fade-in data-closed:trds-animate-fade-out data-hidden:trds-hidden",title:"trds-font-medium trds-text-sm trds-mb-4",description:"trds-text-fg-description trds-text-sm",closeTrigger:"trds-text-fg-description trds-absolute trds-right-2 trds-top-2",trigger:"",arrow:"[--arrow-size:8px] [--arrow-background:#fff]",arrowTip:"trds-border-layer1 trds-border-t trds-border-l"}}),[le,v]=k({name:"popover",hookName:"usePopoverContext",providerName:"PopoverProvider",defaultValue:{classes:{},portalled:!1}});function pe(o){const{portalled:r,children:e,...t}=o,i={classes:ce(),portalled:r};return a.jsx(le,{value:i,children:a.jsx(de,{portalled:r,...t,children:e})})}const ge=c.forwardRef(function(o,r){const{classes:e}=v(),{children:t,className:s,...i}=o;return a.jsx(D,{className:f(e.trigger(),s),ref:r,...i,children:t})}),ue=c.forwardRef(function(o,r){const{classes:e,portalled:t}=v(),{children:s,className:i,...p}=o,l=t?A:c.Fragment;return a.jsx(l,{children:a.jsx(b,{children:a.jsx(y,{className:f(e.content(),i),ref:r,...p,children:s})})})}),me=c.forwardRef(function(o,r){const{classes:e}=v(),{children:t,className:s,...i}=o;return a.jsx(I,{className:f(e.arrow(),s),...i,ref:r,children:a.jsx(h,{className:e.arrowTip()})})}),Pe=c.forwardRef(function(o,r){const{classes:e}=v(),{children:t,className:s,...i}=o;return a.jsx(F,{className:f(e.title(),s),...i,ref:r,children:t})}),fe=c.forwardRef(function(o,r){const{classes:e}=v(),{children:t,className:s,...i}=o;return a.jsx(N,{className:f(e.description(),s),...i,ref:r,children:t})}),ve=c.forwardRef(function(o,r){const{classes:e}=v(),{children:t,className:s,...i}=o;return a.jsx(w,{className:f(e.closeTrigger(),s),ref:r,...i,children:t})});pe.__docgenInfo={description:"",methods:[],displayName:"Root"};ge.__docgenInfo={description:"",methods:[],displayName:"Trigger"};ue.__docgenInfo={description:"",methods:[],displayName:"Content"};ve.__docgenInfo={description:"",methods:[],displayName:"CloseTrigger"};Pe.__docgenInfo={description:"",methods:[],displayName:"Title"};fe.__docgenInfo={description:"",methods:[],displayName:"Description"};me.__docgenInfo={description:"",methods:[],displayName:"Arrow"};export{me as A,ue as C,fe as D,pe as R,ge as T,Pe as a,ve as b};
