import{j as m}from"./jsx-runtime-qGIIFXMu.js";import{I as te,c as y}from"./index-CO00fS6N.js";import{r as p}from"./index-CDs2tPxN.js";import{s as re}from"./sva-qXmx1AZm.js";import{c as oe}from"./create-react-context-Dw26gLIP.js";import{j as ae,c as v,y as x,z as S,k as ne,l as se,u as b,T as A,a0 as de,a1 as W,q as ce,P as le,e as ie,a2 as ue,f as fe,m as g,o as he,s as me,J as pe,B as ge,F as Te}from"./factory-BCwUXDVF.js";import{c as Ie,C as k,x as D,D as Ee,E as Ne,q as be,b as Ce}from"./index-Dquv0SIZ.js";import{c as M}from"./create-split-props-u5h9OPvL.js";import{g as ye,k as P}from"./index-qa1jsk-d.js";import{u as xe,a as Se}from"./use-locale-context-0tfyuFre.js";import{u as F}from"./use-event-eGuf5zsd.js";var j=ae("tree-view").parts("root","label","tree","item","itemIndicator","itemText","branch","branchControl","branchTrigger","branchContent","branchText","branchIndicator");j.build();var E=Ie({getRootId:t=>{var r;return((r=t.ids)==null?void 0:r.root)??`tree-root:${t.id}`},getLabelId:t=>{var r;return((r=t.ids)==null?void 0:r.label)??`tree-label:${t.id}`},getTreeId:t=>{var r;return((r=t.ids)==null?void 0:r.tree)??`tree-tree:${t.id}`},getNodeId(t){return k(t)?t.dataset.branch??t.dataset.item??null:null},getNodeEl(t,r){const e=E.getItemEl(t,r)??E.getBranchEl(t,r);return(e==null?void 0:e.dataset.part)==="branch"?D(e,"[data-part=branch-control]"):e},getTreeEl(t){return E.getById(t,E.getTreeId(t))},getBranchEl(t,r){const e=`[role=treeitem][data-branch="${r}"]`;return D(E.getTreeEl(t),e)},getItemEl(t,r){const e=`[role=treeitem][data-item="${r}"]`;return D(E.getTreeEl(t),e)},getBranchControlEl(t,r){return D(E.getBranchEl(t,r),"[data-part=branch-control]")},getFocusedEl(t){return t.focusedValue?E.getById(t,t.focusedValue):null},focusNode(t,r){k(t)&&t.focus(r)},getNodeDepth(t){return t!=null&&t.dataset.depth?Number(t.dataset.depth):-1},getTreeWalker(t,r){const{skipHidden:e=!0,root:a}=r??{},o=a||E.getTreeEl(t);if(!o)throw new Error("Tree or branch root not found");return E.getDoc(t).createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode(l){return e&&Ee(l)?NodeFilter.FILTER_REJECT:l.role==="treeitem"&&l.dataset.part!=="branch"||l.role==="button"&&l.dataset.part==="branch-control"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}})},getMatchingEl(t,r){const e=E.getTreeWalker(t),a=[];let o=e.firstChild();for(;o;)k(o)&&a.push(o),o=e.nextNode();return Ne(a,{state:t.typeaheadState,key:r,activeId:t.focusedValue,itemToId:n=>E.getNodeId(n)??n.id})},getTreeNodes(t,r={}){const e=E.getTreeWalker(t,r),a=[];let o=e.firstChild();for(;o;)k(o)&&a.push(o),o=e.nextNode();return a},getBranchNodes(t,r){return r===-1?[]:be(E.getTreeEl(t),`[role=treeitem][data-part=branch][data-depth="${r}"]`)},getNodesInRange(t,r,e){const a=new Set;return t.forEach(o=>{const n=E.getNodeId(o);if(n==null)return;if(o===r||o===e){a.add(n);return}const l=o.compareDocumentPosition(r),f=o.compareDocumentPosition(e);if(l&Node.DOCUMENT_POSITION_FOLLOWING&&f&Node.DOCUMENT_POSITION_PRECEDING){a.add(n);return}if(l&Node.DOCUMENT_POSITION_PRECEDING&&f&Node.DOCUMENT_POSITION_FOLLOWING){a.add(n);return}}),Array.from(a)}});const[we,L]=v({name:"TreeViewBranchContext",hookName:"useTreeViewBranchContext",providerName:"<TreeViewBranchProvider />"}),[Ve,w]=v({name:"TreeViewContext",hookName:"useTreeViewContext",providerName:"<TreeViewProvider />"}),[H,$]=v({name:"TreeViewDepthContext",hookName:"useTreeViewDepthContext",providerName:"<TreeViewDepthProvider />"}),G=p.forwardRef((t,r)=>{const[e,a]=M()(t,["disabled","value"]),o=w(),n=$(),l={...e,depth:n},f=x(o.getBranchProps(l),a);return m.jsx(H,{value:n+1,children:m.jsx(we,{value:l,children:m.jsx(S.li,{...f,ref:r})})})});G.displayName="TreeViewBranch";const U=p.forwardRef((t,r)=>{const e=w(),a=L(),o=x(e.getBranchContentProps(a),t);return m.jsx(S.ul,{...o,ref:r})});U.displayName="TreeViewBranchContent";const X=p.forwardRef((t,r)=>{const e=w(),a=L(),o=x(e.getBranchControlProps(a),t);return m.jsx(S.div,{...o,ref:r})});X.displayName="TreeViewBranchControl";const q=p.forwardRef((t,r)=>{const e=w(),a=L(),o=x(e.getBranchIndicatorProps(a),t);return m.jsx(S.div,{...o,ref:r})});q.displayName="TreeViewBranchIndicator";const J=p.forwardRef((t,r)=>{const e=w(),a=L(),o=x(e.getBranchTextProps(a),t);return m.jsx(S.span,{...o,ref:r})});J.displayName="TreeViewBranchText";const[Pe,at]=v({name:"TreeViewItemContext",hookName:"useTreeViewItemContext",providerName:"<TreeViewItemProvider />"}),[ve,Be]=v({name:"TreeViewItemPropsContext",hookName:"useTreeViewItemPropsContext",providerName:"<TreeViewItemProvider />"}),Y=p.forwardRef((t,r)=>{const[{value:e,disabled:a},o]=M()(t,["disabled","value"]),n=w(),l=$(),f={value:e,disabled:a,depth:l},u=x(n.getItemProps(f),o),d=n.getItemState(f);return m.jsx(ve,{value:f,children:m.jsx(Pe,{value:d,children:m.jsx(S.li,{...u,ref:r})})})});Y.displayName="TreeViewItem";const Q=p.forwardRef((t,r)=>{const e=w(),a=Be(),o=x(e.getItemTextProps(a),t);return m.jsx(S.span,{...o,ref:r})});Q.displayName="TreeViewItemText";var Re=ne("tree-view").parts("root","label","tree","item","itemIndicator","itemText","branch","branchControl","branchTrigger","branchContent","branchText","branchIndicator"),N=Re.build(),c=se({getRootId:t=>{var r;return((r=t.ids)==null?void 0:r.root)??`tree-root:${t.id}`},getLabelId:t=>{var r;return((r=t.ids)==null?void 0:r.label)??`tree-label:${t.id}`},getTreeId:t=>{var r;return((r=t.ids)==null?void 0:r.tree)??`tree-tree:${t.id}`},getNodeId(t){return b(t)?t.dataset.branch??t.dataset.item??null:null},getNodeEl(t,r){const e=c.getItemEl(t,r)??c.getBranchEl(t,r);return(e==null?void 0:e.dataset.part)==="branch"?A(e,"[data-part=branch-control]"):e},getTreeEl(t){return c.getById(t,c.getTreeId(t))},getBranchEl(t,r){const e=`[role=treeitem][data-branch="${r}"]`;return A(c.getTreeEl(t),e)},getItemEl(t,r){const e=`[role=treeitem][data-item="${r}"]`;return A(c.getTreeEl(t),e)},getBranchControlEl(t,r){return A(c.getBranchEl(t,r),"[data-part=branch-control]")},getFocusedEl(t){return t.focusedValue?c.getById(t,t.focusedValue):null},focusNode(t,r){b(t)&&t.focus(r)},getNodeDepth(t){return t!=null&&t.dataset.depth?Number(t.dataset.depth):-1},getTreeWalker(t,r){const{skipHidden:e=!0,root:a}=r??{},o=a||c.getTreeEl(t);if(!o)throw new Error("Tree or branch root not found");return c.getDoc(t).createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode(l){return e&&de(l)?NodeFilter.FILTER_REJECT:l.role==="treeitem"&&l.dataset.part!=="branch"||l.role==="button"&&l.dataset.part==="branch-control"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}})},getMatchingEl(t,r){const e=c.getTreeWalker(t),a=[];let o=e.firstChild();for(;o;)b(o)&&a.push(o),o=e.nextNode();return W(a,{state:t.typeaheadState,key:r,activeId:t.focusedValue,itemToId:n=>c.getNodeId(n)??n.id})},getTreeNodes(t,r={}){const e=c.getTreeWalker(t,r),a=[];let o=e.firstChild();for(;o;)b(o)&&a.push(o),o=e.nextNode();return a},getBranchNodes(t,r){return r===-1?[]:ce(c.getTreeEl(t),`[role=treeitem][data-part=branch][data-depth="${r}"]`)},getNodesInRange(t,r,e){const a=new Set;return t.forEach(o=>{const n=c.getNodeId(o);if(n==null)return;if(o===r||o===e){a.add(n);return}const l=o.compareDocumentPosition(r),f=o.compareDocumentPosition(e);if(l&Node.DOCUMENT_POSITION_FOLLOWING&&f&Node.DOCUMENT_POSITION_PRECEDING){a.add(n);return}if(l&Node.DOCUMENT_POSITION_PRECEDING&&f&Node.DOCUMENT_POSITION_FOLLOWING){a.add(n);return}}),Array.from(a)}});function Ae(t,r,e){const a=Array.from(t.context.expandedValue),o=Array.from(t.context.selectedValue),n=t.context.isTypingAhead,l=t.context.focusedValue;function f(d){return{value:d.value,disabled:!!d.disabled,focused:l===d.value,selected:o.includes(d.value)}}function u(d){return{value:d.value,disabled:!!d.disabled,focused:l===d.value,expanded:a.includes(d.value),selected:o.includes(d.value)}}return{expandedValue:a,selectedValue:o,expand(d){if(!d){r({type:"EXPANDED.ALL"});return}const s=new Set(a);d.forEach(i=>s.add(i)),r({type:"EXPANDED.SET",value:s,src:"expand"})},collapse(d){if(!d){r({type:"EXPANDED.SET",value:new Set([]),src:"collapseAll"});return}const s=new Set(a);d.forEach(i=>s.delete(i)),r({type:"EXPANDED.SET",value:s,src:"collapse"})},deselect(d){if(!d){r({type:"SELECTED.SET",value:new Set([]),src:"deselectAll"});return}const s=new Set(o);d.forEach(i=>s.delete(i)),r({type:"SELECTED.SET",value:s,src:"deselect"})},select(d){if(!d){r({type:"SELECTED.ALL"});return}const s=new Set(o);d.forEach(i=>s.add(i)),r({type:"SELECTED.SET",value:s,src:"select"})},focusBranch(d){var s;(s=c.getBranchControlEl(t.context,d))==null||s.focus()},focusItem(d){var s;(s=c.getItemEl(t.context,d))==null||s.focus()},getRootProps(){return e.element({...N.root.attrs,id:c.getRootId(t.context),dir:t.context.dir})},getLabelProps(){return e.element({...N.label.attrs,id:c.getLabelId(t.context),dir:t.context.dir})},getTreeProps(){return e.element({...N.tree.attrs,id:c.getTreeId(t.context),dir:t.context.dir,role:"tree","aria-label":"Tree View","aria-labelledby":c.getLabelId(t.context),"aria-multiselectable":t.context.selectionMode==="multiple"||void 0,onKeyDown(d){if(d.defaultPrevented||le(d))return;const s=ie(d);if(ue(s))return;const i=s==null?void 0:s.closest("[role=treeitem]");if(!i)return;const I=c.getNodeId(i);if(I==null){console.warn("Node id not found for node",i);return}const B=!!(s!=null&&s.dataset.branch),R={ArrowDown(h){P(h)||(h.preventDefault(),r({type:"ITEM.ARROW_DOWN",id:I,shiftKey:h.shiftKey}))},ArrowUp(h){P(h)||(h.preventDefault(),r({type:"ITEM.ARROW_UP",id:I,shiftKey:h.shiftKey}))},ArrowLeft(h){P(h)||i.dataset.disabled||(h.preventDefault(),r({type:B?"BRANCH.ARROW_LEFT":"ITEM.ARROW_LEFT",id:I}))},ArrowRight(h){!B||i.dataset.disabled||(h.preventDefault(),r({type:"BRANCH.ARROW_RIGHT",id:I}))},Home(h){P(h)||(h.preventDefault(),r({type:"ITEM.HOME",id:I,shiftKey:h.shiftKey}))},End(h){P(h)||(h.preventDefault(),r({type:"ITEM.END",id:I,shiftKey:h.shiftKey}))},Space(h){var _;i.dataset.disabled||(n?r({type:"TREE.TYPEAHEAD",key:h.key}):(_=R.Enter)==null||_.call(R,h))},Enter(h){if(i.dataset.disabled)return;(s==null?void 0:s.closest("a[href]"))||h.preventDefault(),r({type:B?"BRANCH.CLICK":"ITEM.CLICK",id:I,src:"keyboard"})},"*"(h){i.dataset.disabled||(h.preventDefault(),r({type:"EXPAND.SIBLINGS",id:I}))},a(h){!h.metaKey||i.dataset.disabled||(h.preventDefault(),r({type:"SELECTED.ALL",preventScroll:!0,moveFocus:!0}))}},ee=ye(d,t.context),K=R[ee];if(K){K(d);return}!t.context.typeahead||!(d.key.length===1&&!P(d))||(r({type:"TREE.TYPEAHEAD",key:d.key,id:I}),d.preventDefault())},onBlur(d){fe(d.currentTarget,d.relatedTarget)||r({type:"TREE.BLUR"})}})},getItemState:f,getItemProps(d){const s=f(d);return e.element({...N.item.attrs,dir:t.context.dir,"data-ownedby":c.getTreeId(t.context),"data-item":s.value,tabIndex:s.focused?0:-1,"data-focus":g(s.focused),role:"treeitem","aria-current":s.selected?"true":void 0,"aria-selected":s.disabled?void 0:s.selected,"data-selected":g(s.selected),"aria-disabled":s.disabled,"data-disabled":g(s.disabled),"aria-level":d.depth,"data-depth":d.depth,style:{"--depth":d.depth},onFocus(i){i.stopPropagation(),r({type:"ITEM.FOCUS",id:s.value})},onClick(i){if(s.disabled)return;const I=i.metaKey||i.ctrlKey;r({type:"ITEM.CLICK",id:s.value,shiftKey:i.shiftKey,ctrlKey:I}),i.stopPropagation(),i.currentTarget.matches("a[href]")||i.preventDefault()}})},getItemTextProps(d){const s=f(d);return e.element({...N.itemText.attrs,"data-disabled":g(s.disabled),"data-selected":g(s.selected),"data-focus":g(s.focused)})},getItemIndicatorProps(d){const s=f(d);return e.element({...N.itemIndicator.attrs,"aria-hidden":!0,"data-disabled":g(s.disabled),"data-selected":g(s.selected),"data-focus":g(s.focused),hidden:!s.selected})},getBranchState:u,getBranchProps(d){const s=u(d);return e.element({...N.branch.attrs,"data-depth":d.depth,dir:t.context.dir,"data-branch":s.value,role:"treeitem","data-ownedby":c.getTreeId(t.context),"aria-level":d.depth,"aria-selected":s.disabled?void 0:s.selected,"data-selected":g(s.selected),"aria-expanded":s.expanded,"data-state":s.expanded?"open":"closed","aria-disabled":s.disabled,"data-disabled":g(s.disabled),style:{"--depth":d.depth}})},getBranchIndicatorProps(d){const s=u(d);return e.element({...N.branchIndicator.attrs,"aria-hidden":!0,"data-state":s.expanded?"open":"closed","data-disabled":g(s.disabled),"data-selected":g(s.selected),"data-focus":g(s.focused)})},getBranchTriggerProps(d){const s=u(d);return e.element({...N.branchTrigger.attrs,role:"button",dir:t.context.dir,"data-disabled":g(s.disabled),"data-state":s.expanded?"open":"closed",onClick(i){s.disabled||(r({type:"BRANCH_TOGGLE.CLICK",id:s.value}),i.stopPropagation())}})},getBranchControlProps(d){const s=u(d);return e.element({...N.branchControl.attrs,role:"button",dir:t.context.dir,tabIndex:s.focused?0:-1,"data-state":s.expanded?"open":"closed","data-disabled":g(s.disabled),"data-selected":g(s.selected),"data-branch":s.value,"data-depth":d.depth,onFocus(i){r({type:"ITEM.FOCUS",id:s.value}),i.stopPropagation()},onClick(i){if(s.disabled)return;const I=i.metaKey||i.ctrlKey;r({type:"BRANCH.CLICK",id:s.value,shiftKey:i.shiftKey,ctrlKey:I}),i.stopPropagation()}})},getBranchTextProps(d){const s=u(d);return e.element({...N.branchText.attrs,dir:t.context.dir,"data-branch":s.value,"data-disabled":g(s.disabled),"data-state":s.expanded?"open":"closed"})},getBranchContentProps(d){const s=u(d);return e.element({...N.branchContent.attrs,role:"group",dir:t.context.dir,"data-branch":s.value,"data-state":s.expanded?"open":"closed",hidden:!s.expanded})}}}var{and:C}=me;function ke(t){const r=Ce(t);return he({id:"tree-view",initial:"idle",context:{expandedValue:[],selectedValue:[],focusedValue:null,expandOnClick:!0,selectionMode:"single",typeahead:!0,...r,typeaheadState:W.defaultOptions},computed:{isMultipleSelection:e=>e.selectionMode==="multiple"},on:{"EXPANDED.SET":{actions:["setExpanded"]},"SELECTED.SET":{actions:["setSelected"]},"SELECTED.ALL":[{guard:C("isMultipleSelection","moveFocus"),actions:["selectAllItems","focusTreeLastItem"]},{guard:"isMultipleSelection",actions:["selectAllItems"]}],"EXPANDED.ALL":{actions:["expandAllBranches"]}},activities:["trackChildrenMutation"],entry:["setFocusableNode"],states:{idle:{on:{"ITEM.FOCUS":{actions:["setFocusedItem"]},"ITEM.ARROW_DOWN":[{guard:C("isShiftKey","isMultipleSelection"),actions:["focusTreeNextItem","extendSelectionToNextItem"]},{actions:["focusTreeNextItem"]}],"ITEM.ARROW_UP":[{guard:C("isShiftKey","isMultipleSelection"),actions:["focusTreePrevItem","extendSelectionToPrevItem"]},{actions:["focusTreePrevItem"]}],"ITEM.ARROW_LEFT":{actions:["focusBranchControl"]},"BRANCH.ARROW_LEFT":[{guard:"isBranchExpanded",actions:["collapseBranch"]},{actions:["focusBranchControl"]}],"BRANCH.ARROW_RIGHT":[{guard:C("isBranchFocused","isBranchExpanded"),actions:["focusBranchFirstItem"]},{actions:["expandBranch"]}],"EXPAND.SIBLINGS":{actions:["expandSiblingBranches"]},"ITEM.HOME":[{guard:C("isShiftKey","isMultipleSelection"),actions:["extendSelectionToFirstItem","focusTreeFirstItem"]},{actions:["focusTreeFirstItem"]}],"ITEM.END":[{guard:C("isShiftKey","isMultipleSelection"),actions:["extendSelectionToLastItem","focusTreeLastItem"]},{actions:["focusTreeLastItem"]}],"ITEM.CLICK":[{guard:C("isCtrlKey","isMultipleSelection"),actions:["addOrRemoveItemFromSelection"]},{guard:C("isShiftKey","isMultipleSelection"),actions:["extendSelectionToItem"]},{actions:["selectItem"]}],"BRANCH.CLICK":[{guard:C("isCtrlKey","isMultipleSelection"),actions:["addOrRemoveItemFromSelection"]},{guard:C("isShiftKey","isMultipleSelection"),actions:["extendSelectionToItem"]},{guard:"openOnClick",actions:["selectItem","toggleBranch"]},{actions:["selectItem"]}],"BRANCH_TOGGLE.CLICK":{actions:["toggleBranch"]},"TREE.TYPEAHEAD":{actions:["focusMatchedItem"]},"TREE.BLUR":{actions:["clearFocusedItem","setFocusableNode"]}}}}},{guards:{isBranchFocused:(e,a)=>e.focusedValue===a.id,isBranchExpanded:(e,a)=>e.expandedValue.includes(a.id),isShiftKey:(e,a)=>a.shiftKey,isCtrlKey:(e,a)=>a.ctrlKey,hasSelectedItems:e=>e.selectedValue.length>0,isMultipleSelection:e=>e.isMultipleSelection,moveFocus:(e,a)=>!!a.moveFocus,openOnClick:e=>!!e.expandOnClick},activities:{trackChildrenMutation(e,a,{send:o}){const n=c.getTreeEl(e);return pe(n,{callback(l){const f=l.flatMap(i=>Array.from(i.removedNodes)).filter(i=>b(i)?i.matches("[role=treeitem]")||i.matches("[role=group]"):!1);if(!f.length)return;let u=null;l.forEach(i=>{b(i.nextSibling)?u=i.nextSibling:b(i.previousSibling)&&(u=i.previousSibling)}),u&&c.focusNode(u);const d=new Set;f.forEach(i=>{const I=c.getNodeId(i);b(i)&&I!=null&&d.add(I)});const s=new Set(e.selectedValue);d.forEach(i=>s.delete(i)),o({type:"SELECTED.SET",value:d})}})}},actions:{setFocusableNode(e){if(e.focusedValue)return;if(e.selectedValue.length>0){const n=Array.from(e.selectedValue)[0];e.focusedValue=n;return}const o=c.getTreeWalker(e).firstChild();b(o)&&(e.focusedValue=c.getNodeId(o))},selectItem(e,a){T.selected(e,[a.id])},setFocusedItem(e,a){T.focused(e,a.id)},clearFocusedItem(e){T.focused(e,null)},clearSelectedItem(e){T.selected(e,[])},toggleBranch(e,a){const o=new Set(e.expandedValue);o.has(a.id)?o.delete(a.id):o.add(a.id),T.expanded(e,Array.from(o))},expandBranch(e,a){const o=new Set(e.expandedValue);o.add(a.id),T.expanded(e,Array.from(o))},collapseBranch(e,a){const o=new Set(e.expandedValue);o.delete(a.id),T.expanded(e,Array.from(o))},setExpanded(e,a){T.expanded(e,a.value)},setSelected(e,a){T.selected(e,a.value)},focusTreeFirstItem(e){const a=c.getTreeWalker(e);c.focusNode(a.firstChild())},focusTreeLastItem(e,a){const o=c.getTreeWalker(e);c.focusNode(o.lastChild(),{preventScroll:a.preventScroll})},focusBranchFirstItem(e,a){const o=c.getNodeEl(e,a.id);if(!o)return;const n=c.getTreeWalker(e);n.currentNode=o,c.focusNode(n.nextNode())},focusTreeNextItem(e,a){const o=c.getNodeEl(e,a.id);if(!o)return;const n=c.getTreeWalker(e);if(e.focusedValue){n.currentNode=o;const l=n.nextNode();c.focusNode(l)}else c.focusNode(n.firstChild())},focusTreePrevItem(e,a){const o=c.getNodeEl(e,a.id);if(!o)return;const n=c.getTreeWalker(e);if(e.focusedValue){n.currentNode=o;const l=n.previousNode();c.focusNode(l)}else c.focusNode(n.lastChild())},focusBranchControl(e,a){const o=c.getNodeEl(e,a.id);if(!o)return;const n=Number(o.dataset.depth)-1;if(n<0)return;const l=`[data-part=branch][data-depth="${n}"]`,f=o.closest(l),u=f==null?void 0:f.querySelector("[data-part=branch-control]");c.focusNode(u)},selectAllItems(e){const a=new Set,o=c.getTreeWalker(e);let n=o.firstChild();for(;n;){const l=c.getNodeId(n);b(n)&&l!=null&&a.add(l),n=o.nextNode()}T.selected(e,Array.from(a))},focusMatchedItem(e,a){c.focusNode(c.getMatchingEl(e,a.key))},addOrRemoveItemFromSelection(e,a){const o=c.getNodeEl(e,a.id);if(!o)return;const n=new Set(e.selectedValue),l=c.getNodeId(o);l!=null&&(n.has(l)?n.delete(l):n.add(l),T.selected(e,Array.from(n)))},expandAllBranches(e){const a=new Set,o=c.getTreeWalker(e,{skipHidden:!1});for(;o.nextNode();){const n=o.currentNode,l=c.getNodeId(n);b(n)&&n.dataset.part==="branch-control"&&l!=null&&a.add(l)}T.expanded(e,Array.from(a))},expandSiblingBranches(e,a){const o=c.getNodeEl(e,a.id),n=c.getBranchNodes(e,c.getNodeDepth(o)),l=new Set;n.forEach(f=>{const u=c.getNodeId(f);u!=null&&l.add(u)}),T.expanded(e,Array.from(l))},extendSelectionToItem(e,a){const o=c.getNodeEl(e,a.id);if(!o)return;const n=c.getTreeNodes(e),l=Array.from(e.selectedValue),f=c.getNodeEl(e,l[0])||n[0],u=c.getNodesInRange(n,f,o);T.selected(e,u)},extendSelectionToNextItem(e,a){const o=a.id,n=c.getNodeEl(e,o);if(!n)return;const l=c.getTreeWalker(e);l.currentNode=n;const f=l.nextNode();c.focusNode(f);const u=new Set(e.selectedValue),d=c.getNodeId(f);d!=null&&(u.has(o)&&u.has(d)?u.delete(o):u.has(d)||u.add(d),T.selected(e,Array.from(u)))},extendSelectionToPrevItem(e,a){const o=a.id,n=c.getNodeEl(e,o);if(!n)return;const l=c.getTreeWalker(e);l.currentNode=n;const f=l.previousNode();c.focusNode(f);const u=new Set(e.selectedValue),d=c.getNodeId(f);d!=null&&(u.has(o)&&u.has(d)?u.delete(o):u.has(d)||u.add(d),T.selected(e,Array.from(u)))},extendSelectionToFirstItem(e){const a=c.getTreeNodes(e),o=c.getNodeEl(e,[...e.selectedValue][0])||a[0],n=a[0],l=c.getNodesInRange(a,o,n);T.selected(e,l)},extendSelectionToLastItem(e){const a=c.getTreeNodes(e),o=c.getNodeEl(e,[...e.selectedValue][0])||a[0],n=a[a.length-1],l=c.getNodesInRange(a,o,n);T.selected(e,l)}}})}var O={focusChange(t){var r;(r=t.onFocusChange)==null||r.call(t,{focusedValue:t.focusedValue})},expandedChange(t){var r;(r=t.onExpandedChange)==null||r.call(t,{expandedValue:Array.from(t.expandedValue),focusedValue:t.focusedValue})},selectionChange(t){var r;(r=t.onSelectionChange)==null||r.call(t,{selectedValue:Array.from(t.selectedValue),focusedValue:t.focusedValue})}},T={selected(t,r){t.selectedValue=r,O.selectionChange(t)},focused(t,r){t.focusedValue=r,O.focusChange(t)},expanded(t,r){t.expandedValue=r,O.expandedChange(t)}};const De=(t={})=>{const{getRootNode:r}=xe(),{dir:e}=Se(),a={id:p.useId(),dir:e,getRootNode:r,selectedValue:t.defaultSelectedValue,expandedValue:t.defaultExpandedValue,...t},o={...a,selectedValue:t.selectedValue,expandedValue:t.expandedValue,onFocusChange:F(t.onFocusChange,{sync:!0}),onExpandedChange:F(t.onExpandedChange),onSelectionChange:F(t.onSelectionChange)},[n,l]=ge(ke(a),{context:o});return Ae(n,l,Te)},Z=p.forwardRef((t,r)=>{const[e,a]=M()(t,["defaultExpandedValue","defaultSelectedValue","expandedValue","expandOnClick","focusedValue","id","ids","onExpandedChange","onFocusChange","onSelectionChange","selectedValue","selectionMode","typeahead"]),o=De(e),n=x(o.getRootProps(),a);return m.jsx(Ve,{value:o,children:m.jsx(S.div,{...n,ref:r})})});Z.displayName="TreeViewRoot";const z=p.forwardRef((t,r)=>{const e=w(),a=x(e.getTreeProps(),t);return m.jsx(H,{value:1,children:m.jsx(S.ul,{...a,ref:r})})});z.displayName="TreeViewTree";const Le=re({className:`${te.scope} treeView`,slots:j.keys(),base:{root:{width:"full"},branch:{},branchContent:{position:"relative"},branchControl:{alignItems:"center",borderRadius:"md",color:"neutral.400",display:"flex",fontWeight:"medium",gap:"1.5",ps:"calc((var(--depth) - 1) * 22px)",py:"1.5",textStyle:"sm",transitionDuration:"normal",transitionProperty:"background, color",transitionTimingFunction:"default",_hover:{background:"neutral.100",color:"neutral.800"},cursor:"pointer"},branchIndicator:{color:"neutral.300",transformOrigin:"center",transitionDuration:"normal",transitionProperty:"transform",transitionTimingFunction:"default","& svg":{fontSize:"md",width:"4",height:"4"},_open:{color:"primary.500",transform:"rotate(90deg)"}},item:{borderRadius:"md",color:"neutral.400",cursor:"pointer",fontWeight:"medium",position:"relative",ps:"calc(((var(--depth) - 1) * 22px) + 22px)",py:"1.5",textStyle:"sm",transitionDuration:"normal",transitionProperty:"background, color",transitionTimingFunction:"default",_hover:{background:"neutral.100",color:"neutral.800"},_selected:{background:"neutral.100",color:"neutral.800",_before:{content:'""',position:"absolute",left:"2",top:"0",width:"2px",height:"full",bg:"primary.500",zIndex:"1"}},_disabled:{color:"disabled",cursor:"not-allowed",_hover:{background:"transparent",color:"disabled"}}},tree:{display:"flex",flexDirection:"column",gap:"0"}}}),[_e,V]=oe({name:"treeView",hookName:"useTreeViewContext",providerName:"TreeViewProvider",defaultValue:{classes:{}}}),Fe=p.forwardRef(function(t,r){const{className:e,children:a,...o}=t,n=Le(),l={classes:n};return m.jsx(_e,{value:l,children:m.jsx(Z,{ref:r,className:y(n.root,e),...o,children:a})})}),Oe=p.forwardRef(function(t,r){const{className:e,children:a,...o}=t,{classes:n}=V();return m.jsx(z,{className:y(n.tree,e),ref:r,...o,children:a})}),Me=p.forwardRef(function(t,r){const{className:e,children:a,...o}=t,{classes:n}=V();return m.jsx(Y,{className:y(n.item,e),ref:r,...o,children:a})}),Ke=p.forwardRef(function(t,r){const{className:e,children:a,...o}=t,{classes:n}=V();return m.jsx(Q,{className:y(n.itemText,e),ref:r,...o,children:a})}),We=p.forwardRef(function(t,r){const{className:e,children:a,...o}=t,{classes:n}=V();return m.jsx(G,{className:y(n.branch,e),ref:r,...o,children:a})}),je=p.forwardRef(function(t,r){const{className:e,children:a,...o}=t,{classes:n}=V();return m.jsx(J,{className:y(n.branchText,e),ref:r,...o,children:a})}),He=p.forwardRef(function(t,r){const{className:e,children:a,...o}=t,{classes:n}=V();return m.jsx(q,{className:y(n.branchIndicator,e),ref:r,...o,children:a})}),$e=p.forwardRef(function(t,r){const{className:e,children:a,...o}=t,{classes:n}=V();return m.jsx(X,{className:y(n.branchControl,e),ref:r,...o,children:a})}),Ge=p.forwardRef(function(t,r){const{className:e,children:a,...o}=t,{classes:n}=V();return m.jsx(U,{className:y(n.branchContent,e),ref:r,...o,children:a})});Fe.__docgenInfo={description:"",methods:[],displayName:"Root"};Oe.__docgenInfo={description:"",methods:[],displayName:"Tree"};Me.__docgenInfo={description:"",methods:[],displayName:"Item"};Ke.__docgenInfo={description:"",methods:[],displayName:"ItemText"};We.__docgenInfo={description:"",methods:[],displayName:"Branch"};je.__docgenInfo={description:"",methods:[],displayName:"BranchText"};He.__docgenInfo={description:"",methods:[],displayName:"BranchIndicator"};$e.__docgenInfo={description:"",methods:[],displayName:"BranchControl"};Ge.__docgenInfo={description:"",methods:[],displayName:"BranchContent"};export{We as B,Me as I,Fe as R,Oe as T,Ke as a,$e as b,je as c,Ge as d,He as e};
