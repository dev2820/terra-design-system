import{j as n}from"./jsx-runtime-qGIIFXMu.js";import{r as m}from"./index-CDs2tPxN.js";import{c as $}from"./cva-C095pwBQ.js";import{s as F}from"./sva-CxSEfBjn.js";import{f as D,h as U,A,m as V,j as E,k as O,l as B,o as z,p as h,S as W,q as K,s as q,t as k,r as Z,F as H,u as X,x as J,y as Q,z as Y}from"./use-locale-context-DWoAJph3.js";import{d as ee}from"./index-hTcMZcOQ.js";import{c as G}from"./index-DJ3ti8gJ.js";import{c as te,g as oe,d as ae,e as ne}from"./index-Dli2qhww.js";import{a as re,t as ie}from"./index-Bc7AdKyF.js";import{u as b}from"./use-event-eGuf5zsd.js";var N=D("rating-group").parts("root","label","item","control");N.build();var v=U({getRootId:e=>{var t;return((t=e.ids)==null?void 0:t.root)??`rating:${e.id}`},getLabelId:e=>{var t;return((t=e.ids)==null?void 0:t.label)??`rating:${e.id}:label`},getHiddenInputId:e=>{var t;return((t=e.ids)==null?void 0:t.hiddenInput)??`rating:${e.id}:input`},getControlId:e=>{var t;return((t=e.ids)==null?void 0:t.control)??`rating:${e.id}:control`},getItemId:(e,t)=>{var o,a;return((a=(o=e.ids)==null?void 0:o.rating)==null?void 0:a.call(o,t))??`rating:${e.id}:star:${t}`},getRootEl:e=>v.getById(e,v.getRootId(e)),getControlEl:e=>v.getById(e,v.getControlId(e)),getRadioEl:e=>{var t;return(t=v.getControlEl(e))==null?void 0:t.querySelector(`[role=radio][aria-posinset='${Math.ceil(e.value)}']`)},getActiveEl:e=>v.getRootNode(e).activeElement,getHiddenInputEl:e=>v.getById(e,v.getHiddenInputId(e)),dispatchChangeEvent:e=>{const t=v.getHiddenInputEl(e);t&&ee(t,{value:e.value})}});G()(["allowHalf","autoFocus","count","dir","disabled","form","getRootNode","id","ids","name","onHoverChange","onValueChange","readOnly","translations","value"]);G()(["index"]);const[le,C]=A({name:"RatingGroupContext",hookName:"useRatingGroupContext",providerName:"<RatingGroupProvider />"}),se=e=>e.children(C()),_=m.forwardRef((e,t)=>{const o=C(),a=V(o.getControlProps(),e);return n.jsx(E.div,{...a,ref:t})});_.displayName="RatingGroupControl";const j=m.forwardRef((e,t)=>{const o=C(),a=V(o.getHiddenInputProps(),e);return n.jsx(E.input,{...a,ref:t})});j.displayName="RatingGroupHiddenInput";const[de,ue]=A({name:"RatingGroupItemContext",hookName:"useRatingGroupItemContext",providerName:"<RatingGroupItemProvider />"}),S=m.forwardRef((e,t)=>{const[o,a]=O()(e,["index"]),r=C(),d=V(r.getItemProps(o),a),g=r.getItemState(o);return n.jsx(de,{value:g,children:n.jsx(E.span,{...d,ref:t})})});S.displayName="RatingGroupItem";const ce=e=>e.children(ue());var ge=B("rating-group").parts("root","label","item","control"),I=ge.build(),i=z({getRootId:e=>{var t;return((t=e.ids)==null?void 0:t.root)??`rating:${e.id}`},getLabelId:e=>{var t;return((t=e.ids)==null?void 0:t.label)??`rating:${e.id}:label`},getHiddenInputId:e=>{var t;return((t=e.ids)==null?void 0:t.hiddenInput)??`rating:${e.id}:input`},getControlId:e=>{var t;return((t=e.ids)==null?void 0:t.control)??`rating:${e.id}:control`},getItemId:(e,t)=>{var o,a;return((a=(o=e.ids)==null?void 0:o.rating)==null?void 0:a.call(o,t))??`rating:${e.id}:star:${t}`},getRootEl:e=>i.getById(e,i.getRootId(e)),getControlEl:e=>i.getById(e,i.getControlId(e)),getRadioEl:e=>{var t;return(t=i.getControlEl(e))==null?void 0:t.querySelector(`[role=radio][aria-posinset='${Math.ceil(e.value)}']`)},getActiveEl:e=>i.getRootNode(e).activeElement,getHiddenInputEl:e=>i.getById(e,i.getHiddenInputId(e)),dispatchChangeEvent:e=>{const t=i.getHiddenInputEl(e);t&&re(t,{value:e.value})}});function ve(e,t,o){const a=e.context.isInteractive,r=e.context.isDisabled,d=e.context.value,g=e.context.hoveredValue,f=e.context.translations;function R(l){const s=e.context.isHovering?e.context.hoveredValue:e.context.value,u=Math.ceil(s)===l.index,L=l.index<=s||u,c=u&&Math.abs(s-l.index)===.5;return{highlighted:L,half:c,checked:u||e.context.value===-1&&l.index===1}}return{hovering:e.context.isHovering,value:d,hoveredValue:g,count:e.context.count,items:Array.from({length:e.context.count}).map((l,s)=>s+1),setValue(l){t({type:"SET_VALUE",value:l})},clearValue(){t("CLEAR_VALUE")},getRootProps(){return o.element({dir:e.context.dir,...I.root.attrs,id:i.getRootId(e.context)})},getHiddenInputProps(){return o.input({name:e.context.name,form:e.context.form,type:"text",hidden:!0,id:i.getHiddenInputId(e.context),defaultValue:e.context.value})},getLabelProps(){return o.element({...I.label.attrs,dir:e.context.dir,id:i.getLabelId(e.context),"data-disabled":h(r)})},getControlProps(){return o.element({id:i.getControlId(e.context),...I.control.attrs,dir:e.context.dir,role:"radiogroup","aria-orientation":"horizontal","aria-labelledby":i.getLabelId(e.context),"aria-readonly":W(e.context.readOnly),"data-readonly":h(e.context.readOnly),tabIndex:e.context.readOnly?0:-1,"data-disabled":h(r),onPointerMove(l){!a||l.pointerType==="touch"||t("GROUP_POINTER_OVER")},onPointerLeave(l){!a||l.pointerType==="touch"||t("GROUP_POINTER_LEAVE")}})},getItemState:R,getItemProps(l){const{index:s}=l,u=R(l),L=f.ratingValueText(s);return o.element({...I.item.attrs,dir:e.context.dir,id:i.getItemId(e.context,s.toString()),role:"radio",tabIndex:r?void 0:u.checked?0:-1,"aria-roledescription":"rating","aria-label":L,"aria-disabled":r,"data-disabled":h(r),"data-readonly":h(e.context.readOnly),"aria-setsize":e.context.count,"aria-checked":u.checked,"data-checked":h(u.checked),"aria-posinset":s,"data-highlighted":h(u.highlighted),"data-half":h(u.half),onPointerDown(c){a&&te(c)&&c.preventDefault()},onPointerMove(c){if(!a)return;const y=oe(c),M=ae(y,c.currentTarget).getPercentValue({orientation:"horizontal",dir:e.context.dir})<.5;t({type:"POINTER_OVER",index:s,isMidway:M})},onKeyDown(c){if(c.defaultPrevented||!a)return;const y={ArrowLeft(){t("ARROW_LEFT")},ArrowRight(){t("ARROW_RIGHT")},ArrowUp(){t("ARROW_LEFT")},ArrowDown(){t("ARROW_RIGHT")},Space(){t({type:"SPACE",value:s})},Home(){t("HOME")},End(){t("END")}},P=ne(c,e.context),x=y[P];x&&(c.preventDefault(),x(c))},onClick(){a&&t({type:"CLICK",value:s})},onFocus(){a&&t("FOCUS")},onBlur(){a&&t("BLUR")}})}}}function pe(e){const t=K(e);return q({id:"rating",initial:"idle",context:{name:"rating",count:5,dir:"ltr",value:-1,readOnly:!1,disabled:!1,...t,hoveredValue:-1,fieldsetDisabled:!1,translations:{ratingValueText:o=>`${o} stars`,...t.translations}},created:["roundValueIfNeeded"],watch:{allowHalf:["roundValueIfNeeded"]},computed:{isDisabled:o=>!!o.disabled||o.fieldsetDisabled,isInteractive:o=>!(o.isDisabled||o.readOnly),isHovering:o=>o.hoveredValue>-1},activities:["trackFormControlState"],on:{SET_VALUE:{actions:["setValue"]},CLEAR_VALUE:{actions:["clearValue"]}},states:{idle:{entry:"clearHoveredValue",on:{GROUP_POINTER_OVER:"hover",FOCUS:"focus",CLICK:{actions:["setValue","focusActiveRadio"]}}},focus:{on:{POINTER_OVER:{actions:"setHoveredValue"},GROUP_POINTER_LEAVE:{actions:"clearHoveredValue"},BLUR:"idle",SPACE:{guard:"isValueEmpty",actions:["setValue"]},CLICK:{actions:["setValue","focusActiveRadio"]},ARROW_LEFT:{actions:["setPrevValue","focusActiveRadio"]},ARROW_RIGHT:{actions:["setNextValue","focusActiveRadio"]},HOME:{actions:["setValueToMin","focusActiveRadio"]},END:{actions:["setValueToMax","focusActiveRadio"]}}},hover:{on:{POINTER_OVER:{actions:"setHoveredValue"},GROUP_POINTER_LEAVE:[{guard:"isRadioFocused",target:"focus",actions:"clearHoveredValue"},{target:"idle",actions:"clearHoveredValue"}],CLICK:{actions:["setValue","focusActiveRadio"]}}}}},{guards:{isInteractive:o=>!(o.disabled||o.readOnly),isHoveredValueEmpty:o=>o.hoveredValue===-1,isValueEmpty:o=>o.value<=0,isRadioFocused:o=>{var a;return!!((a=i.getControlEl(o))!=null&&a.contains(i.getActiveEl(o)))}},activities:{trackFormControlState(o,a,{initialContext:r}){return ie(i.getHiddenInputEl(o),{onFieldsetDisabledChange(d){o.fieldsetDisabled=d},onFormReset(){p.value(o,r.value)}})}},actions:{clearHoveredValue(o){p.hoveredValue(o,-1)},focusActiveRadio(o){Z(()=>{var a;return(a=i.getRadioEl(o))==null?void 0:a.focus()})},setPrevValue(o){const a=o.allowHalf?.5:1;p.value(o,Math.max(0,o.value-a))},setNextValue(o){const a=o.allowHalf?.5:1,r=o.value===-1?0:o.value;p.value(o,Math.min(o.count,r+a))},setValueToMin(o){p.value(o,1)},setValueToMax(o){p.value(o,o.count)},setValue(o,a){const r=o.hoveredValue===-1?a.value:o.hoveredValue;p.value(o,r)},clearValue(o){p.value(o,-1)},setHoveredValue(o,a){const d=o.allowHalf&&a.isMidway?.5:0;p.hoveredValue(o,a.index-d)},roundValueIfNeeded(o){o.allowHalf||(o.value=Math.round(o.value))}}})}var w={change:e=>{var t;(t=e.onValueChange)==null||t.call(e,{value:e.value}),i.dispatchChangeEvent(e)},hoverChange:e=>{var t;(t=e.onHoverChange)==null||t.call(e,{hoveredValue:e.hoveredValue})}},p={value:(e,t)=>{H(e.value,t)||(e.value=t,w.change(e))},hoveredValue:(e,t)=>{H(e.hoveredValue,t)||(e.hoveredValue=t,w.hoverChange(e))}};k()(["allowHalf","autoFocus","count","dir","disabled","form","getRootNode","id","ids","name","onHoverChange","onValueChange","readOnly","translations","value"]);k()(["index"]);const he=e=>{const{getRootNode:t}=X(),{dir:o}=J(),a={id:m.useId(),dir:o,getRootNode:t,value:e.defaultValue,...e},r={...a,value:e.value,onValueChange:b(e.onValueChange,{sync:!0}),onHoverChange:b(e.onHoverChange)},[d,g]=Q(pe(a),{context:r});return ve(d,g,Y)},T=m.forwardRef((e,t)=>{const[o,a]=O()(e,["allowHalf","autoFocus","count","defaultValue","disabled","form","id","ids","name","onHoverChange","onValueChange","readOnly","translations","value"]),r=he(o),d=V(r.getRootProps(),a);return n.jsx(le,{value:r,children:n.jsx(E.div,{...d,ref:t})})});T.displayName="RatingGroupRoot";const me=F({className:"ratingGroup",slots:N.keys(),base:{root:{display:"flex",flexDirection:"column",gap:"1.5"},control:{display:"flex"},item:{cursor:"pointer",transitionDuration:"normal",transitionProperty:"color, fill",transitionTimingFunction:"default",fill:"transparent",_highlighted:{fill:"currentColor"},_focusVisible:{outline:"none"},_disabled:{cursor:"not-allowed",opacity:.4}}},defaultVariants:{size:"md"},variants:{size:{sm:{control:{gap:"0"},item:{"& svg":{width:"4",height:"4"}},label:{textStyle:"sm"}},md:{control:{gap:"0.5"},item:{"& svg":{width:"5",height:"5"}},label:{textStyle:"sm"}},lg:{control:{gap:"0.5"},item:{"& svg":{width:"6",height:"6"}},label:{textStyle:"md"}}}}}),fe=m.forwardRef(function(e,t){const{size:o,className:a,children:r,...d}=e,g=me({size:o}),f=Re(o);return n.jsxs(T,{ref:t,className:$(g.root,a),...d,children:[n.jsx(_,{className:g.control,children:n.jsx(se,{children:({items:R})=>R.map(l=>n.jsx(S,{index:l,className:g.item,children:n.jsx(ce,{children:({half:s,highlighted:u})=>s&&u?n.jsx(Ve,{size:f}):u?n.jsx(Ie,{size:f}):n.jsx(Ee,{size:f})})},l))})}),n.jsx(j,{})]})}),Re=e=>e==="sm"?12:e==="md"?16:e==="lg"?20:16,Ie=e=>{const{size:t,...o}=e;return n.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...o,children:n.jsx("path",{d:"M15.09 8.26L12 2L8.91 8.26L2 9.27L7 14.14L5.82 21.02L12 17.77L18.18 21.02L17 14.14L22 9.27L15.09 8.26Z",stroke:"currentColor",fill:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})},Ve=e=>{const{size:t,...o}=e;return n.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o,children:[n.jsx("path",{d:"M15.09 8.26L12 2L8.91 8.26L2 9.27L7 14.14L5.82 21.02L12 17.77L18.18 21.02L17 14.14L22 9.27L15.09 8.26Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M5.82 21.02L12 17.77V2L8.91 8.26L2 9.27L7 14.14L5.82 21.02Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})},Ee=e=>{const{size:t,...o}=e;return n.jsx("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"transparent",xmlns:"http://www.w3.org/2000/svg",...o,children:n.jsx("path",{d:"M15.09 8.26L12 2L8.91 8.26L2 9.27L7 14.14L5.82 21.02L12 17.77L18.18 21.02L17 14.14L22 9.27L15.09 8.26Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})};fe.__docgenInfo={description:"",methods:[],displayName:"Root"};export{fe as R};
