import{z as Jt,j as Qt,q as Zt,s as te,u as Pt,x as ee,F as ne,G as ie,r as tt,H as ft,I as oe,J as re,g as $t,p as se,a as pt,K as Ft,c as et,L as Lt,d as st,M as ce,N as ae,O as le,P as fe}from"./use-locale-context-CR0_REhh.js";import{r as ue}from"./index-CDs2tPxN.js";import{u as de}from"./use-event-eGuf5zsd.js";import{b as mt,f as St,i as me}from"./index-Gg5MN_a-.js";const R=Math.min,P=Math.max,ct=Math.round,ot=Math.floor,V=t=>({x:t,y:t}),he={left:"right",right:"left",bottom:"top",top:"bottom"},ge={start:"end",end:"start"};function ht(t,e,n){return P(t,R(e,n))}function _(t,e){return typeof t=="function"?t(e):t}function $(t){return t.split("-")[0]}function K(t){return t.split("-")[1]}function yt(t){return t==="x"?"y":"x"}function xt(t){return t==="y"?"height":"width"}function G(t){return["top","bottom"].includes($(t))?"y":"x"}function wt(t){return yt(G(t))}function pe(t,e,n){n===void 0&&(n=!1);const i=K(t),o=wt(t),r=xt(o);let s=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[r]>e.floating[r]&&(s=at(s)),[s,at(s)]}function ye(t){const e=at(t);return[gt(t),e,gt(e)]}function gt(t){return t.replace(/start|end/g,e=>ge[e])}function xe(t,e,n){const i=["left","right"],o=["right","left"],r=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:i:e?i:o;case"left":case"right":return e?r:s;default:return[]}}function we(t,e,n,i){const o=K(t);let r=xe($(t),n==="start",i);return o&&(r=r.map(s=>s+"-"+o),e&&(r=r.concat(r.map(gt)))),r}function at(t){return t.replace(/left|right|bottom|top/g,e=>he[e])}function ve(t){return{top:0,right:0,bottom:0,left:0,...t}}function Wt(t){return typeof t!="number"?ve(t):{top:t,right:t,bottom:t,left:t}}function lt(t){const{x:e,y:n,width:i,height:o}=t;return{width:i,height:o,top:n,left:e,right:e+i,bottom:n+o,x:e,y:n}}function Ct(t,e,n){let{reference:i,floating:o}=t;const r=G(e),s=wt(e),c=xt(s),a=$(e),l=r==="y",d=i.x+i.width/2-o.width/2,m=i.y+i.height/2-o.height/2,u=i[c]/2-o[c]/2;let f;switch(a){case"top":f={x:d,y:i.y-o.height};break;case"bottom":f={x:d,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:m};break;case"left":f={x:i.x-o.width,y:m};break;default:f={x:i.x,y:i.y}}switch(K(e)){case"start":f[s]-=u*(n&&l?-1:1);break;case"end":f[s]+=u*(n&&l?-1:1);break}return f}const be=async(t,e,n)=>{const{placement:i="bottom",strategy:o="absolute",middleware:r=[],platform:s}=n,c=r.filter(Boolean),a=await(s.isRTL==null?void 0:s.isRTL(e));let l=await s.getElementRects({reference:t,floating:e,strategy:o}),{x:d,y:m}=Ct(l,i,a),u=i,f={},g=0;for(let p=0;p<c.length;p++){const{name:h,fn:y}=c[p],{x,y:w,data:v,reset:b}=await y({x:d,y:m,initialPlacement:i,placement:u,strategy:o,middlewareData:f,rects:l,platform:s,elements:{reference:t,floating:e}});d=x??d,m=w??m,f={...f,[h]:{...f[h],...v}},b&&g<=50&&(g++,typeof b=="object"&&(b.placement&&(u=b.placement),b.rects&&(l=b.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:o}):b.rects),{x:d,y:m}=Ct(l,u,a)),p=-1)}return{x:d,y:m,placement:u,strategy:o,middlewareData:f}};async function vt(t,e){var n;e===void 0&&(e={});const{x:i,y:o,platform:r,rects:s,elements:c,strategy:a}=t,{boundary:l="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:u=!1,padding:f=0}=_(e,t),g=Wt(f),h=c[u?m==="floating"?"reference":"floating":m],y=lt(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(h)))==null||n?h:h.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(c.floating)),boundary:l,rootBoundary:d,strategy:a})),x=m==="floating"?{x:i,y:o,width:s.floating.width,height:s.floating.height}:s.reference,w=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c.floating)),v=await(r.isElement==null?void 0:r.isElement(w))?await(r.getScale==null?void 0:r.getScale(w))||{x:1,y:1}:{x:1,y:1},b=lt(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:x,offsetParent:w,strategy:a}):x);return{top:(y.top-b.top+g.top)/v.y,bottom:(b.bottom-y.bottom+g.bottom)/v.y,left:(y.left-b.left+g.left)/v.x,right:(b.right-y.right+g.right)/v.x}}const Ee=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:o,rects:r,platform:s,elements:c,middlewareData:a}=e,{element:l,padding:d=0}=_(t,e)||{};if(l==null)return{};const m=Wt(d),u={x:n,y:i},f=wt(o),g=xt(f),p=await s.getDimensions(l),h=f==="y",y=h?"top":"left",x=h?"bottom":"right",w=h?"clientHeight":"clientWidth",v=r.reference[g]+r.reference[f]-u[f]-r.floating[g],b=u[f]-r.reference[f],E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l));let O=E?E[w]:0;(!O||!await(s.isElement==null?void 0:s.isElement(E)))&&(O=c.floating[w]||r.floating[g]);const T=v/2-b/2,W=O/2-p[g]/2-1,H=R(m[y],W),U=R(m[x],W),S=H,Q=O-p[g]-U,A=O/2-p[g]/2+T,k=ht(S,A,Q),M=!a.arrow&&K(o)!=null&&A!==k&&r.reference[g]/2-(A<S?H:U)-p[g]/2<0,I=M?A<S?A-S:A-Q:0;return{[f]:u[f]+I,data:{[f]:k,centerOffset:A-k-I,...M&&{alignmentOffset:I}},reset:M}}}),Oe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:o,middlewareData:r,rects:s,initialPlacement:c,platform:a,elements:l}=e,{mainAxis:d=!0,crossAxis:m=!0,fallbackPlacements:u,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:p=!0,...h}=_(t,e);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const y=$(o),x=$(c)===c,w=await(a.isRTL==null?void 0:a.isRTL(l.floating)),v=u||(x||!p?[at(c)]:ye(c));!u&&g!=="none"&&v.push(...we(c,p,g,w));const b=[c,...v],E=await vt(e,h),O=[];let T=((i=r.flip)==null?void 0:i.overflows)||[];if(d&&O.push(E[y]),m){const S=pe(o,s,w);O.push(E[S[0]],E[S[1]])}if(T=[...T,{placement:o,overflows:O}],!O.every(S=>S<=0)){var W,H;const S=(((W=r.flip)==null?void 0:W.index)||0)+1,Q=b[S];if(Q)return{data:{index:S,overflows:T},reset:{placement:Q}};let A=(H=T.filter(k=>k.overflows[0]<=0).sort((k,M)=>k.overflows[1]-M.overflows[1])[0])==null?void 0:H.placement;if(!A)switch(f){case"bestFit":{var U;const k=(U=T.map(M=>[M.placement,M.overflows.filter(I=>I>0).reduce((I,Gt)=>I+Gt,0)]).sort((M,I)=>M[1]-I[1])[0])==null?void 0:U[0];k&&(A=k);break}case"initialPlacement":A=c;break}if(o!==A)return{reset:{placement:A}}}return{}}}};async function Ae(t,e){const{placement:n,platform:i,elements:o}=t,r=await(i.isRTL==null?void 0:i.isRTL(o.floating)),s=$(n),c=K(n),a=G(n)==="y",l=["left","top"].includes(s)?-1:1,d=r&&a?-1:1,m=_(e,t);let{mainAxis:u,crossAxis:f,alignmentAxis:g}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return c&&typeof g=="number"&&(f=c==="end"?g*-1:g),a?{x:f*d,y:u*l}:{x:u*l,y:f*d}}const Pe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:o,y:r,placement:s,middlewareData:c}=e,a=await Ae(e,t);return s===((n=c.offset)==null?void 0:n.placement)&&(i=c.arrow)!=null&&i.alignmentOffset?{}:{x:o+a.x,y:r+a.y,data:{...a,placement:s}}}}},Le=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:o}=e,{mainAxis:r=!0,crossAxis:s=!1,limiter:c={fn:h=>{let{x:y,y:x}=h;return{x:y,y:x}}},...a}=_(t,e),l={x:n,y:i},d=await vt(e,a),m=G($(o)),u=yt(m);let f=l[u],g=l[m];if(r){const h=u==="y"?"top":"left",y=u==="y"?"bottom":"right",x=f+d[h],w=f-d[y];f=ht(x,f,w)}if(s){const h=m==="y"?"top":"left",y=m==="y"?"bottom":"right",x=g+d[h],w=g-d[y];g=ht(x,g,w)}const p=c.fn({...e,[u]:f,[m]:g});return{...p,data:{x:p.x-n,y:p.y-i}}}}},Se=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:o,rects:r,middlewareData:s}=e,{offset:c=0,mainAxis:a=!0,crossAxis:l=!0}=_(t,e),d={x:n,y:i},m=G(o),u=yt(m);let f=d[u],g=d[m];const p=_(c,e),h=typeof p=="number"?{mainAxis:p,crossAxis:0}:{mainAxis:0,crossAxis:0,...p};if(a){const w=u==="y"?"height":"width",v=r.reference[u]-r.floating[w]+h.mainAxis,b=r.reference[u]+r.reference[w]-h.mainAxis;f<v?f=v:f>b&&(f=b)}if(l){var y,x;const w=u==="y"?"width":"height",v=["top","left"].includes($(o)),b=r.reference[m]-r.floating[w]+(v&&((y=s.offset)==null?void 0:y[m])||0)+(v?0:h.crossAxis),E=r.reference[m]+r.reference[w]+(v?0:((x=s.offset)==null?void 0:x[m])||0)-(v?h.crossAxis:0);g<b?g=b:g>E&&(g=E)}return{[u]:f,[m]:g}}}},Ce=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:i,platform:o,elements:r}=e,{apply:s=()=>{},...c}=_(t,e),a=await vt(e,c),l=$(n),d=K(n),m=G(n)==="y",{width:u,height:f}=i.floating;let g,p;l==="top"||l==="bottom"?(g=l,p=d===(await(o.isRTL==null?void 0:o.isRTL(r.floating))?"start":"end")?"left":"right"):(p=l,g=d==="end"?"top":"bottom");const h=f-a.top-a.bottom,y=u-a.left-a.right,x=R(f-a[g],h),w=R(u-a[p],y),v=!e.middlewareData.shift;let b=x,E=w;if(m?E=d||v?R(w,y):y:b=d||v?R(x,h):h,v&&!d){const T=P(a.left,0),W=P(a.right,0),H=P(a.top,0),U=P(a.bottom,0);m?E=u-2*(T!==0||W!==0?T+W:P(a.left,a.right)):b=f-2*(H!==0||U!==0?H+U:P(a.top,a.bottom))}await s({...e,availableWidth:E,availableHeight:b});const O=await o.getDimensions(r.floating);return u!==O.width||f!==O.height?{reset:{rects:!0}}:{}}}};function J(t){return Ht(t)?(t.nodeName||"").toLowerCase():"#document"}function L(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function F(t){var e;return(e=(Ht(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Ht(t){return t instanceof Node||t instanceof L(t).Node}function D(t){return t instanceof Element||t instanceof L(t).Element}function B(t){return t instanceof HTMLElement||t instanceof L(t).HTMLElement}function Nt(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof L(t).ShadowRoot}function it(t){const{overflow:e,overflowX:n,overflowY:i,display:o}=N(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(o)}function Ne(t){return["table","td","th"].includes(J(t))}function bt(t){const e=Et(),n=N(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function Te(t){let e=Y(t);for(;B(e)&&!q(e);){if(bt(e))return e;e=Y(e)}return null}function Et(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function q(t){return["html","body","#document"].includes(J(t))}function N(t){return L(t).getComputedStyle(t)}function ut(t){return D(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Y(t){if(J(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Nt(t)&&t.host||F(t);return Nt(e)?e.host:e}function Ut(t){const e=Y(t);return q(e)?t.ownerDocument?t.ownerDocument.body:t.body:B(e)&&it(e)?e:Ut(e)}function nt(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=Ut(t),r=o===((i=t.ownerDocument)==null?void 0:i.body),s=L(o);return r?e.concat(s,s.visualViewport||[],it(o)?o:[],s.frameElement&&n?nt(s.frameElement):[]):e.concat(o,nt(o,[],n))}function Vt(t){const e=N(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const o=B(t),r=o?t.offsetWidth:n,s=o?t.offsetHeight:i,c=ct(n)!==r||ct(i)!==s;return c&&(n=r,i=s),{width:n,height:i,$:c}}function Ot(t){return D(t)?t:t.contextElement}function j(t){const e=Ot(t);if(!B(e))return V(1);const n=e.getBoundingClientRect(),{width:i,height:o,$:r}=Vt(e);let s=(r?ct(n.width):n.width)/i,c=(r?ct(n.height):n.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!c||!Number.isFinite(c))&&(c=1),{x:s,y:c}}const ke=V(0);function _t(t){const e=L(t);return!Et()||!e.visualViewport?ke:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Me(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==L(t)?!1:e}function X(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),r=Ot(t);let s=V(1);e&&(i?D(i)&&(s=j(i)):s=j(t));const c=Me(r,n,i)?_t(r):V(0);let a=(o.left+c.x)/s.x,l=(o.top+c.y)/s.y,d=o.width/s.x,m=o.height/s.y;if(r){const u=L(r),f=i&&D(i)?L(i):i;let g=u,p=g.frameElement;for(;p&&i&&f!==g;){const h=j(p),y=p.getBoundingClientRect(),x=N(p),w=y.left+(p.clientLeft+parseFloat(x.paddingLeft))*h.x,v=y.top+(p.clientTop+parseFloat(x.paddingTop))*h.y;a*=h.x,l*=h.y,d*=h.x,m*=h.y,a+=w,l+=v,g=L(p),p=g.frameElement}}return lt({width:d,height:m,x:a,y:l})}const Re=[":popover-open",":modal"];function At(t){return Re.some(e=>{try{return t.matches(e)}catch{return!1}})}function De(t){let{elements:e,rect:n,offsetParent:i,strategy:o}=t;const r=o==="fixed",s=F(i),c=e?At(e.floating):!1;if(i===s||c&&r)return n;let a={scrollLeft:0,scrollTop:0},l=V(1);const d=V(0),m=B(i);if((m||!m&&!r)&&((J(i)!=="body"||it(s))&&(a=ut(i)),B(i))){const u=X(i);l=j(i),d.x=u.x+i.clientLeft,d.y=u.y+i.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-a.scrollLeft*l.x+d.x,y:n.y*l.y-a.scrollTop*l.y+d.y}}function Be(t){return Array.from(t.getClientRects())}function Yt(t){return X(F(t)).left+ut(t).scrollLeft}function Ie(t){const e=F(t),n=ut(t),i=t.ownerDocument.body,o=P(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),r=P(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let s=-n.scrollLeft+Yt(t);const c=-n.scrollTop;return N(i).direction==="rtl"&&(s+=P(e.clientWidth,i.clientWidth)-o),{width:o,height:r,x:s,y:c}}function ze(t,e){const n=L(t),i=F(t),o=n.visualViewport;let r=i.clientWidth,s=i.clientHeight,c=0,a=0;if(o){r=o.width,s=o.height;const l=Et();(!l||l&&e==="fixed")&&(c=o.offsetLeft,a=o.offsetTop)}return{width:r,height:s,x:c,y:a}}function $e(t,e){const n=X(t,!0,e==="fixed"),i=n.top+t.clientTop,o=n.left+t.clientLeft,r=B(t)?j(t):V(1),s=t.clientWidth*r.x,c=t.clientHeight*r.y,a=o*r.x,l=i*r.y;return{width:s,height:c,x:a,y:l}}function Tt(t,e,n){let i;if(e==="viewport")i=ze(t,n);else if(e==="document")i=Ie(F(t));else if(D(e))i=$e(e,n);else{const o=_t(t);i={...e,x:e.x-o.x,y:e.y-o.y}}return lt(i)}function Xt(t,e){const n=Y(t);return n===e||!D(n)||q(n)?!1:N(n).position==="fixed"||Xt(n,e)}function Fe(t,e){const n=e.get(t);if(n)return n;let i=nt(t,[],!1).filter(c=>D(c)&&J(c)!=="body"),o=null;const r=N(t).position==="fixed";let s=r?Y(t):t;for(;D(s)&&!q(s);){const c=N(s),a=bt(s);!a&&c.position==="fixed"&&(o=null),(r?!a&&!o:!a&&c.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||it(s)&&!a&&Xt(t,s))?i=i.filter(d=>d!==s):o=c,s=Y(s)}return e.set(t,i),i}function We(t){let{element:e,boundary:n,rootBoundary:i,strategy:o}=t;const s=[...n==="clippingAncestors"?At(e)?[]:Fe(e,this._c):[].concat(n),i],c=s[0],a=s.reduce((l,d)=>{const m=Tt(e,d,o);return l.top=P(m.top,l.top),l.right=R(m.right,l.right),l.bottom=R(m.bottom,l.bottom),l.left=P(m.left,l.left),l},Tt(e,c,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function He(t){const{width:e,height:n}=Vt(t);return{width:e,height:n}}function Ue(t,e,n){const i=B(e),o=F(e),r=n==="fixed",s=X(t,!0,r,e);let c={scrollLeft:0,scrollTop:0};const a=V(0);if(i||!i&&!r)if((J(e)!=="body"||it(o))&&(c=ut(e)),i){const m=X(e,!0,r,e);a.x=m.x+e.clientLeft,a.y=m.y+e.clientTop}else o&&(a.x=Yt(o));const l=s.left+c.scrollLeft-a.x,d=s.top+c.scrollTop-a.y;return{x:l,y:d,width:s.width,height:s.height}}function dt(t){return N(t).position==="static"}function kt(t,e){return!B(t)||N(t).position==="fixed"?null:e?e(t):t.offsetParent}function jt(t,e){const n=L(t);if(At(t))return n;if(!B(t)){let o=Y(t);for(;o&&!q(o);){if(D(o)&&!dt(o))return o;o=Y(o)}return n}let i=kt(t,e);for(;i&&Ne(i)&&dt(i);)i=kt(i,e);return i&&q(i)&&dt(i)&&!bt(i)?n:i||Te(t)||n}const Ve=async function(t){const e=this.getOffsetParent||jt,n=this.getDimensions,i=await n(t.floating);return{reference:Ue(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function _e(t){return N(t).direction==="rtl"}const Ye={convertOffsetParentRelativeRectToViewportRelativeRect:De,getDocumentElement:F,getClippingRect:We,getOffsetParent:jt,getElementRects:Ve,getClientRects:Be,getDimensions:He,getScale:j,isElement:D,isRTL:_e};function Xe(t,e){let n=null,i;const o=F(t);function r(){var c;clearTimeout(i),(c=n)==null||c.disconnect(),n=null}function s(c,a){c===void 0&&(c=!1),a===void 0&&(a=1),r();const{left:l,top:d,width:m,height:u}=t.getBoundingClientRect();if(c||e(),!m||!u)return;const f=ot(d),g=ot(o.clientWidth-(l+m)),p=ot(o.clientHeight-(d+u)),h=ot(l),x={rootMargin:-f+"px "+-g+"px "+-p+"px "+-h+"px",threshold:P(0,R(1,a))||1};let w=!0;function v(b){const E=b[0].intersectionRatio;if(E!==a){if(!w)return s();E?s(!1,E):i=setTimeout(()=>{s(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(v,{...x,root:o.ownerDocument})}catch{n=new IntersectionObserver(v,x)}n.observe(t)}return s(!0),r}function je(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:r=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:a=!1}=i,l=Ot(t),d=o||r?[...l?nt(l):[],...nt(e)]:[];d.forEach(y=>{o&&y.addEventListener("scroll",n,{passive:!0}),r&&y.addEventListener("resize",n)});const m=l&&c?Xe(l,n):null;let u=-1,f=null;s&&(f=new ResizeObserver(y=>{let[x]=y;x&&x.target===l&&f&&(f.unobserve(e),cancelAnimationFrame(u),u=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),n()}),l&&!a&&f.observe(l),f.observe(e));let g,p=a?X(t):null;a&&h();function h(){const y=X(t);p&&(y.x!==p.x||y.y!==p.y||y.width!==p.width||y.height!==p.height)&&n(),p=y,g=requestAnimationFrame(h)}return n(),()=>{var y;d.forEach(x=>{o&&x.removeEventListener("scroll",n),r&&x.removeEventListener("resize",n)}),m==null||m(),(y=f)==null||y.disconnect(),f=null,a&&cancelAnimationFrame(g)}}const qe=Pe,Ke=Le,Ge=Oe,Je=Ce,Qe=Ee,Ze=Se,tn=(t,e,n)=>{const i=new Map,o={platform:Ye,...n},r={...o.platform,_c:i};return be(t,e,{...o,platform:r})},[Dn,Bn]=Jt({name:"PresenceContext",hookName:"usePresenceContext",providerName:"<PresenceProvider />"}),In=t=>Qt()(t,["lazyMount","onExitComplete","present","unmountOnExit"]);function en(t,e,n){const i=t.matches("mounted","unmountSuspended");return{skip:!t.context.initial&&i,present:i,setNode(o){o&&e({type:"NODE.SET",node:o})},unmount(){e({type:"UNMOUNT"})}}}function rt(t){return(t==null?void 0:t.animationName)||"none"}function nn(t){return Zt({initial:t.present?"mounted":"unmounted",context:{node:null,styles:null,unmountAnimationName:null,prevAnimationName:null,present:!1,initial:!1,...t},exit:["clearInitial"],watch:{present:["setInitial","syncPresence"]},on:{"NODE.SET":{actions:["setNode","setStyles"]}},states:{mounted:{on:{UNMOUNT:{target:"unmounted",actions:["invokeOnExitComplete"]},"UNMOUNT.SUSPEND":"unmountSuspended"}},unmountSuspended:{activities:["trackAnimationEvents"],on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]},"ANIMATION.END":{target:"unmounted",actions:["invokeOnExitComplete"]},UNMOUNT:{target:"unmounted",actions:["invokeOnExitComplete"]}}},unmounted:{entry:["clearPrevAnimationName"],on:{MOUNT:{target:"mounted",actions:["setPrevAnimationName"]}}}}},{actions:{setInitial(e){e.initial=!0},clearInitial(e){e.initial=!1},invokeOnExitComplete(e){var n;(n=e.onExitComplete)==null||n.call(e)},setNode(e,n){e.node=Pt(n.node)},setStyles(e,n){const i=n.node.ownerDocument.defaultView||window;e.styles=Pt(i.getComputedStyle(n.node))},syncPresence(e,n,{send:i}){if(e.rafId&&cancelAnimationFrame(e.rafId),e.present){i({type:"MOUNT",src:"presence.changed"});return}e.rafId=requestAnimationFrame(()=>{var r;const o=rt(e.styles);e.unmountAnimationName=o,o==="none"||o===e.prevAnimationName||((r=e.styles)==null?void 0:r.display)==="none"?i({type:"UNMOUNT",src:"presence.changed"}):i({type:"UNMOUNT.SUSPEND"})})},setPrevAnimationName(e){requestAnimationFrame(()=>{e.prevAnimationName=rt(e.styles)})},clearPrevAnimationName(e){e.prevAnimationName=null}},activities:{trackAnimationEvents(e,n,{send:i}){const o=e.node;if(!o)return;const r=c=>{c.target===o&&(e.prevAnimationName=rt(e.styles))},s=c=>{const a=rt(e.styles);c.target===o&&a===e.unmountAnimationName&&i({type:"UNMOUNT",src:"animationend"})};return o.addEventListener("animationstart",r),o.addEventListener("animationcancel",s),o.addEventListener("animationend",s),()=>{o.removeEventListener("animationstart",r),o.removeEventListener("animationcancel",s),o.removeEventListener("animationend",s)}}}})}te()(["onExitComplete","present"]);const zn=t=>{const{lazyMount:e,unmountOnExit:n,...i}=t,o=ue.useRef(!1),r={...i,onExitComplete:de(t.onExitComplete)},[s,c]=ee(nn(r),{context:r}),a=en(s,c);a.present&&(o.current=!0);const l=!a.present&&!o.current&&e||n&&!a.present&&o.current;return{getPresenceProps:m=>({ref:ne(a.setNode,m),"data-state":t.present?"open":"closed",hidden:!a.present}),present:a.present,unmounted:l}};function Mt(t=0,e=0,n=0,i=0){if(typeof DOMRect=="function")return new DOMRect(t,e,n,i);const o={x:t,y:e,width:n,height:i,top:e,right:t+n,bottom:e+i,left:t};return{...o,toJSON:()=>o}}function on(t){if(!t)return Mt();const{x:e,y:n,width:i,height:o}=t;return Mt(e,n,i,o)}function rn(t,e){return{contextElement:ft(t)?t:void 0,getBoundingClientRect:()=>{const n=t,i=e==null?void 0:e(n);return i||!n?on(i):n.getBoundingClientRect()}}}var Z=t=>({variable:t,reference:`var(${t})`}),z={arrowSize:Z("--arrow-size"),arrowSizeHalf:Z("--arrow-size-half"),arrowBg:Z("--arrow-background"),transformOrigin:Z("--transform-origin"),arrowOffset:Z("--arrow-offset")},sn=t=>({top:"bottom center","top-start":t?`${t.x}px bottom`:"left bottom","top-end":t?`${t.x}px bottom`:"right bottom",bottom:"top center","bottom-start":t?`${t.x}px top`:"top left","bottom-end":t?`${t.x}px top`:"top right",left:"right center","left-start":t?`right ${t.y}px`:"right top","left-end":t?`right ${t.y}px`:"right bottom",right:"left center","right-start":t?`left ${t.y}px`:"left top","right-end":t?`left ${t.y}px`:"left bottom"}),cn={name:"transformOrigin",fn({placement:t,elements:e,middlewareData:n}){const{arrow:i}=n,o=sn(i)[t],{floating:r}=e;return r.style.setProperty(z.transformOrigin.variable,o),{data:{transformOrigin:o}}}},an={name:"rects",fn({rects:t}){return{data:t}}},ln=t=>{if(t)return{name:"shiftArrow",fn({placement:e,middlewareData:n}){if(!n.arrow)return{};const{x:i,y:o}=n.arrow,r=e.split("-")[0];return Object.assign(t.style,{left:i!=null?`${i}px`:"",top:o!=null?`${o}px`:"",[r]:`calc(100% + ${z.arrowOffset.reference})`}),{}}}};function fn(t){const[e,n]=t.split("-");return{side:e,align:n,hasAlign:n!=null}}var un={strategy:"absolute",placement:"bottom",listeners:!0,gutter:8,flip:!0,slide:!0,overlap:!1,sameWidth:!1,fitViewport:!1,overflowPadding:8,arrowPadding:4};function Rt(t,e){const n=t.devicePixelRatio||1;return Math.round(e*n)/n}function qt(t){return re(t.boundary)}function dn(t,e){if(t)return Qe({element:t,padding:e.arrowPadding})}function mn(t,e){if(!oe(e.offset??e.gutter))return qe(({placement:n})=>{var l,d;const i=((t==null?void 0:t.clientHeight)||0)/2,o=((l=e.offset)==null?void 0:l.mainAxis)??e.gutter,r=typeof o=="number"?o+i:o??i,{hasAlign:s}=fn(n),c=s?void 0:e.shift,a=((d=e.offset)==null?void 0:d.crossAxis)??c;return se({crossAxis:a,mainAxis:r,alignmentAxis:e.shift})})}function hn(t){if(t.flip)return Ge({boundary:qt(t),padding:t.overflowPadding,fallbackPlacements:t.flip===!0?void 0:t.flip})}function gn(t){if(!(!t.slide&&!t.overlap))return Ke({boundary:qt(t),mainAxis:t.slide,crossAxis:t.overlap,padding:t.overflowPadding,limiter:Ze()})}function pn(t){return Je({padding:t.overflowPadding,apply({elements:e,rects:n,availableHeight:i,availableWidth:o}){const r=e.floating,s=Math.round(n.reference.width);o=Math.floor(o),i=Math.floor(i),r.style.setProperty("--reference-width",`${s}px`),r.style.setProperty("--available-width",`${o}px`),r.style.setProperty("--available-height",`${i}px`)}})}function yn(t){return t?t===!0?{ancestorResize:!0,ancestorScroll:!0,elementResize:!0,layoutShift:!0}:t:{}}function xn(t,e,n={}){const i=rn(t,n.getAnchorRect);if(!e||!i)return;const o=Object.assign({},un,n),r=e.querySelector("[data-part=arrow]"),s=[mn(r,o),hn(o),gn(o),dn(r,o),ln(r),cn,pn(o),an],{placement:c,strategy:a,onComplete:l,onPositioned:d}=o,m=async()=>{if(!i||!e)return;const p=await tn(i,e,{placement:c,middleware:s,strategy:a});l==null||l(p),d==null||d({placed:!0});const h=$t(e),y=Rt(h,p.x),x=Rt(h,p.y);e.style.setProperty("--x",`${y}px`),e.style.setProperty("--y",`${x}px`);const w=e.firstElementChild;if(w){const v=h.getComputedStyle(w).zIndex;e.style.setProperty("--z-index",v)}},u=async()=>{n.updatePosition?(await n.updatePosition({updatePosition:m}),d==null||d({placed:!0})):await m()},f=yn(o.listeners),g=o.listeners?je(i,e,u,f):ie;return u(),()=>{g==null||g(),d==null||d({placed:!1})}}function $n(t,e,n={}){const{defer:i,...o}=n,r=i?tt:c=>c(),s=[];return s.push(r(()=>{const c=typeof t=="function"?t():t,a=typeof e=="function"?e():e;s.push(xn(c,a,o))})),()=>{s.forEach(c=>c==null?void 0:c())}}var wn={bottom:"rotate(45deg)",left:"rotate(135deg)",top:"rotate(225deg)",right:"rotate(315deg)"};function Fn(t={}){const{placement:e,sameWidth:n,fitViewport:i,strategy:o="absolute"}=t;return{arrow:{position:"absolute",width:z.arrowSize.reference,height:z.arrowSize.reference,[z.arrowSizeHalf.variable]:`calc(${z.arrowSize.reference} / 2)`,[z.arrowOffset.variable]:`calc(${z.arrowSizeHalf.reference} * -1)`},arrowTip:{transform:e?wn[e.split("-")[0]]:void 0,background:z.arrowBg.reference,top:"0",left:"0",width:"100%",height:"100%",position:"absolute",zIndex:"inherit"},floating:{position:o,isolation:"isolate",minWidth:n?void 0:"max-content",width:n?"var(--reference-width)":void 0,maxWidth:i?"var(--available-width)":void 0,maxHeight:i?"var(--available-height)":void 0,top:"0px",left:"0px",transform:e?"translate3d(var(--x), var(--y), 0)":"translate3d(0, -100vh, 0)",zIndex:"var(--z-index)"}}}function vn(t){const e={each(n){var i;for(let o=0;o<((i=t.frames)==null?void 0:i.length);o+=1){const r=t.frames[o];r&&n(r)}},addEventListener(n,i,o){return e.each(r=>{try{r.document.addEventListener(n,i,o)}catch{}}),()=>{try{e.removeEventListener(n,i,o)}catch{}}},removeEventListener(n,i,o){e.each(r=>{try{r.document.removeEventListener(n,i,o)}catch{}})}};return e}var Dt="pointerdown.outside",Bt="focus.outside";function bn(t){for(const e of t)if(ft(e)&&Ft(e))return!0;return!1}var Kt=t=>"clientY"in t;function En(t,e){if(!Kt(e)||!t)return!1;const n=t.getBoundingClientRect();return n.width===0||n.height===0?!1:n.top<=e.clientY&&e.clientY<=n.top+n.height&&n.left<=e.clientX&&e.clientX<=n.left+n.width}function On(t){const e=et(t);if(!e||!Kt(t))return!1;const i=e.scrollHeight>e.clientHeight&&t.clientX>e.clientWidth,r=e.scrollWidth>e.clientWidth&&t.clientY>e.clientHeight;return i||r}function An(t,e){const{exclude:n,onFocusOutside:i,onPointerDownOutside:o,onInteractOutside:r,defer:s}=e;if(!t)return;const c=pt(t),a=$t(t),l=vn(a);function d(h){const y=et(h);return!ft(y)||st(t,y)||En(t,h)||On(h)?!1:!(n!=null&&n(y))}let m;function u(h){function y(){var v;const x=s?tt:b=>b(),w=((v=h.composedPath)==null?void 0:v.call(h))??[h.target];x(()=>{if(!(!t||!d(h))){if(o||r){const b=Lt(o,r);t.addEventListener(Dt,b,{once:!0})}St(t,Dt,{bubbles:!1,cancelable:!0,detail:{originalEvent:h,contextmenu:me(h),focusable:bn(w)}})}})}h.pointerType==="touch"?(l.removeEventListener("click",y),c.removeEventListener("click",y),m=y,c.addEventListener("click",y,{once:!0}),l.addEventListener("click",y,{once:!0})):y()}const f=new Set,g=setTimeout(()=>{f.add(l.addEventListener("pointerdown",u,!0)),f.add(mt(c,"pointerdown",u,!0))},0);function p(h){(s?tt:x=>x())(()=>{if(!(!t||!d(h))){if(i||r){const x=Lt(i,r);t.addEventListener(Bt,x,{once:!0})}St(t,Bt,{bubbles:!1,cancelable:!0,detail:{originalEvent:h,contextmenu:!1,focusable:Ft(et(h))}})}})}return f.add(mt(c,"focusin",p,!0)),f.add(l.addEventListener("focusin",p,!0)),()=>{clearTimeout(g),m&&(l.removeEventListener("click",m),c.removeEventListener("click",m)),f.forEach(h=>h())}}function Pn(t,e){const{defer:n}=e,i=n?tt:r=>r(),o=[];return o.push(i(()=>{const r=typeof t=="function"?t():t;o.push(An(r,e))})),()=>{o.forEach(r=>r==null?void 0:r())}}function Ln(t,e){const n=i=>{i.key==="Escape"&&(i.isComposing||e==null||e(i))};return mt(pt(t),"keydown",n,{capture:!0})}var C={layers:[],branches:[],count(){return this.layers.length},pointerBlockingLayers(){return this.layers.filter(t=>t.pointerBlocking)},topMostPointerBlockingLayer(){return[...this.pointerBlockingLayers()].slice(-1)[0]},hasPointerBlockingLayer(){return this.pointerBlockingLayers().length>0},isBelowPointerBlockingLayer(t){var i;const e=this.indexOf(t),n=this.topMostPointerBlockingLayer()?this.indexOf((i=this.topMostPointerBlockingLayer())==null?void 0:i.node):-1;return e<n},isTopMost(t){const e=this.layers[this.count()-1];return(e==null?void 0:e.node)===t},getNestedLayers(t){return Array.from(this.layers).slice(this.indexOf(t)+1)},isInNestedLayer(t,e){return this.getNestedLayers(t).some(n=>st(n.node,e))},isInBranch(t){return Array.from(this.branches).some(e=>st(e,t))},add(t){const e=this.layers.push(t);t.node.style.setProperty("--layer-index",`${e}`)},addBranch(t){this.branches.push(t)},remove(t){const e=this.indexOf(t);e<0||(e<this.count()-1&&this.getNestedLayers(t).forEach(i=>i.dismiss()),this.layers.splice(e,1),t.style.removeProperty("--layer-index"))},removeBranch(t){const e=this.branches.indexOf(t);e>=0&&this.branches.splice(e,1)},indexOf(t){return this.layers.findIndex(e=>e.node===t)},dismiss(t){var e;(e=this.layers[this.indexOf(t)])==null||e.dismiss()},clear(){this.remove(this.layers[0].node)}},It;function zt(){C.layers.forEach(({node:t})=>{t.style.pointerEvents=C.isBelowPointerBlockingLayer(t)?"none":"auto"})}function Sn(t){t.style.pointerEvents=""}function Cn(t,e){const n=pt(t),i=[];if(C.hasPointerBlockingLayer()&&!n.body.hasAttribute("data-inert")&&(It=document.body.style.pointerEvents,queueMicrotask(()=>{n.body.style.pointerEvents="none",n.body.setAttribute("data-inert","")})),e){const o=le(e,r=>{i.push(fe(r,{pointerEvents:"auto"}))});i.push(o)}return()=>{C.hasPointerBlockingLayer()||(queueMicrotask(()=>{n.body.style.pointerEvents=It,n.body.removeAttribute("data-inert"),n.body.style.length===0&&n.body.removeAttribute("style")}),i.forEach(o=>o()))}}function Nn(t,e){if(!t){ae("[@zag-js/dismissable] node is `null` or `undefined`");return}const{onDismiss:n,pointerBlocking:i,exclude:o,debug:r}=e,s={dismiss:n,node:t,pointerBlocking:i};C.add(s),zt();function c(u){var g,p;const f=et(u.detail.originalEvent);C.isBelowPointerBlockingLayer(t)||C.isInBranch(f)||((g=e.onPointerDownOutside)==null||g.call(e,u),(p=e.onInteractOutside)==null||p.call(e,u),!u.defaultPrevented&&(r&&console.log("onPointerDownOutside:",u.detail.originalEvent),n==null||n()))}function a(u){var g,p;const f=et(u.detail.originalEvent);C.isInBranch(f)||((g=e.onFocusOutside)==null||g.call(e,u),(p=e.onInteractOutside)==null||p.call(e,u),!u.defaultPrevented&&(r&&console.log("onFocusOutside:",u.detail.originalEvent),n==null||n()))}function l(u){var f;C.isTopMost(t)&&((f=e.onEscapeKeyDown)==null||f.call(e,u),!u.defaultPrevented&&n&&(u.preventDefault(),n()))}function d(u){var h;if(!t)return!1;const f=typeof o=="function"?o():o,g=Array.isArray(f)?f:[f],p=(h=e.persistentElements)==null?void 0:h.map(y=>y()).filter(ft);return p&&g.push(...p),g.some(y=>st(y,u))||C.isInNestedLayer(t,u)}const m=[i?Cn(t,e.persistentElements):void 0,Ln(t,l),Pn(t,{exclude:d,onFocusOutside:a,onPointerDownOutside:c,defer:e.defer})];return()=>{C.remove(t),zt(),Sn(t),m.forEach(u=>u==null?void 0:u())}}function Wn(t,e){const{defer:n}=e,i=n?tt:r=>r(),o=[];return o.push(i(()=>{const r=ce(t)?t():t;o.push(Nn(r,e))})),()=>{o.forEach(r=>r==null?void 0:r())}}export{Dn as P,$n as a,zn as b,Fn as g,In as s,Wn as t,Bn as u};
