var m=Object.defineProperty,T=(i,t,e)=>t in i?m(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,r=(i,t,e)=>(T(i,typeof t!="symbol"?t+"":t,e),e);function y(i){let t,e,s=2166136261;for(t=0,e=i.length;t<e;t++)s^=i.charCodeAt(t),s+=(s<<1)+(s<<4)+(s<<7)+(s<<8)+(s<<24);return`00000${(s>>>0).toString(36)}`.slice(-6)}var f=i=>typeof i=="object"&&i!==null&&!Array.isArray(i),c=(i,t)=>Object.prototype.hasOwnProperty.call(i,t),o={itemToValue(i){return typeof i=="string"?i:f(i)&&c(i,"value")?i.value:""},itemToString(i){return typeof i=="string"?i:f(i)&&c(i,"label")?i.label:o.itemToValue(i)},itemToDisabled(i){return f(i)&&c(i,"disabled")?!!i.disabled:!1}},x=class{constructor(i){this.options=i,r(this,"nodes",new Map),r(this,"disabledValues",new Set),r(this,"_firstValue",null),r(this,"_lastValue",null),r(this,"hash",""),r(this,"isEqual",t=>this.hash===t.hash),r(this,"iterate",()=>{const{items:t}=this.options,e=new Set;for(let s=0;s<t.length;s++){const l=t[s],u=this.itemToValue(l),n=this.itemToString(l),h=this.itemToDisabled(l);e.add(JSON.stringify({value:u,label:n,disabled:h}));const d={item:Object.freeze(l),index:s,label:n,value:u,previousValue:this.itemToValue(t[s-1])??null,nextValue:this.itemToValue(t[s+1])??null};this.nodes.set(u,d),h&&this.disabledValues.add(u),s===0&&(this._firstValue=u),s===t.length-1&&(this._lastValue=u)}return this.hash=y(Array.from(e).join("")),this}),r(this,"setItems",t=>(this.options.items=t,this.iterate())),r(this,"item",t=>{var e;return t===null?null:((e=this.nodes.get(t))==null?void 0:e.item)??null}),r(this,"items",t=>t.map(e=>this.item(e)).filter(Boolean)),r(this,"at",t=>{for(const e of this.nodes.values())if(e.index===t)return e.item;return null}),r(this,"sortFn",(t,e)=>{const s=this.nodes.get(t),l=this.nodes.get(e);return((s==null?void 0:s.index)??0)-((l==null?void 0:l.index)??0)}),r(this,"sort",t=>[...t].sort(this.sortFn)),r(this,"itemToValue",t=>{var e,s;return t?((s=(e=this.options).itemToValue)==null?void 0:s.call(e,t))??o.itemToValue(t):""}),r(this,"itemToString",t=>{var e,s;return t?((s=(e=this.options).itemToString)==null?void 0:s.call(e,t))??o.itemToString(t):""}),r(this,"itemToDisabled",t=>{var e,s;return t?((s=(e=this.options).isItemDisabled)==null?void 0:s.call(e,t))??o.itemToDisabled(t):!1}),r(this,"valueToString",t=>{var e;return t==null?"":((e=this.nodes.get(t))==null?void 0:e.label)??""}),r(this,"itemsToString",(t,e=", ")=>t.map(s=>this.itemToString(s)).filter(Boolean).join(e)),r(this,"has",t=>t==null?!1:this.nodes.has(t)),r(this,"count",()=>this.nodes.size),r(this,"first",()=>{let t=this._firstValue;for(;t!=null;){let e=this.nodes.get(t);if(e!=null&&!this.disabledValues.has(e.value))return t;t=(e==null?void 0:e.nextValue)??null}return null}),r(this,"last",()=>{let t=this._lastValue;for(;t!=null;){let e=this.nodes.get(t);if(e!=null&&!this.disabledValues.has(e.value))return t;t=(e==null?void 0:e.previousValue)??null}return null}),r(this,"next",t=>{if(t==null)return null;const e=this.nodes.get(t);let s=(e==null?void 0:e.nextValue)??null;for(;s!=null;){let l=this.nodes.get(s);if(l!=null&&!this.disabledValues.has(l.value))return s;s=(l==null?void 0:l.nextValue)??null}return null}),r(this,"prev",t=>{if(t==null)return null;const e=this.nodes.get(t);let s=(e==null?void 0:e.previousValue)??null;for(;s!=null;){let l=this.nodes.get(s);if(l!=null&&!this.disabledValues.has(l.value))return s;s=(l==null?void 0:l.previousValue)??null}return null}),r(this,"isItemDisabled",t=>this.disabledValues.has(this.itemToValue(t))),r(this,"toArray",()=>Array.from(this.nodes.values())),r(this,"indexOf",t=>{var e;return t==null?-1:((e=this.nodes.get(t))==null?void 0:e.index)??-1}),r(this,"getByText",(t,e)=>{const s=this.indexOf(e);let l=e!=null?v(this.toArray(),s):this.toArray();return t.length===1&&(l=l.filter(n=>n.value!==e)),l.find(n=>S(n.label,t))}),r(this,"search",(t,e)=>{var V;const{state:s,currentValue:l,timeout:u=350}=e,n=s.keysSoFar+t,d=n.length>1&&Array.from(n).every(a=>a===n[0])?n[0]:n,b=((V=this.getByText(d,l))==null?void 0:V.value)??null;function g(){clearTimeout(s.timer),s.timer=-1}function p(a){s.keysSoFar=a,g(),a!==""&&(s.timer=+setTimeout(()=>{p(""),g()},u))}return p(n),b}),r(this,"toJSON",()=>({size:this.count(),first:this.first(),last:this.last()})),this.iterate()}},S=(i,t)=>i.toLowerCase().startsWith(t.toLowerCase()),v=(i,t)=>i.map((e,s)=>i[(Math.max(t,0)+s)%i.length]);export{x as C};
