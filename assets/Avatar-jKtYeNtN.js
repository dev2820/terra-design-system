import{j as i}from"./jsx-runtime-qGIIFXMu.js";import{f as y}from"./index-DOljKnny.js";import{r as d}from"./index-CDs2tPxN.js";import{c as A}from"./cva-C095pwBQ.js";import{s as C}from"./sva-CxSEfBjn.js";import{j as N,c as S,y as p,z as u,k as O,l as P,o as M,p as w,I as G,J as L,B as x,F as j}from"./factory-BCwUXDVF.js";import{c as $,b as D}from"./index-Dquv0SIZ.js";import{c as F}from"./index-DJ3ti8gJ.js";import{c as U}from"./createLucideIcon-zijr-BYg.js";import{c as B}from"./create-split-props-u5h9OPvL.js";import{u as _,a as H}from"./use-locale-context-0tfyuFre.js";import{u as T}from"./use-event-eGuf5zsd.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=U("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var h=N("avatar").parts("root","image","fallback");h.build();var m=$({getRootId:a=>{var t;return((t=a.ids)==null?void 0:t.root)??`avatar:${a.id}`},getImageId:a=>{var t;return((t=a.ids)==null?void 0:t.image)??`avatar:${a.id}:image`},getFallbackId:a=>{var t;return((t=a.ids)==null?void 0:t.fallback)??`avatar:${a.id}:fallback`},getRootEl:a=>m.getById(a,m.getRootId(a)),getImageEl:a=>m.getById(a,m.getImageId(a))});F()(["dir","id","ids","onStatusChange","getRootNode"]);const[V,k]=S({name:"AvatarContext",hookName:"useAvatarContext",providerName:"<AvatarProvider />"}),R=d.forwardRef((a,t)=>{const e=k(),r=p(e.getFallbackProps(),a);return i.jsx(u.span,{...r,ref:t})});R.displayName="AvatarFallback";const b=d.forwardRef((a,t)=>{const e=k(),r=p(e.getImageProps(),a);return i.jsx(u.img,{...r,ref:t})});b.displayName="AvatarImage";var J=O("avatar").parts("root","image","fallback"),v=J.build(),n=P({getRootId:a=>{var t;return((t=a.ids)==null?void 0:t.root)??`avatar:${a.id}`},getImageId:a=>{var t;return((t=a.ids)==null?void 0:t.image)??`avatar:${a.id}:image`},getFallbackId:a=>{var t;return((t=a.ids)==null?void 0:t.fallback)??`avatar:${a.id}:fallback`},getRootEl:a=>n.getById(a,n.getRootId(a)),getImageEl:a=>n.getById(a,n.getImageId(a))});function W(a,t,e){const r=a.matches("loaded");return{loaded:r,setSrc(s){t({type:"SRC.SET",src:s})},setLoaded(){t({type:"IMG.LOADED",src:"api"})},setError(){t({type:"IMG.ERROR",src:"api"})},getRootProps(){return e.element({...v.root.attrs,dir:a.context.dir,id:n.getRootId(a.context)})},getImageProps(){return e.img({...v.image.attrs,hidden:!r,dir:a.context.dir,id:n.getImageId(a.context),"data-state":r?"visible":"hidden",onLoad(){t({type:"IMG.LOADED",src:"element"})},onError(){t({type:"IMG.ERROR",src:"element"})}})},getFallbackProps(){return e.element({...v.fallback.attrs,dir:a.context.dir,id:n.getFallbackId(a.context),hidden:r,"data-state":r?"hidden":"visible"})}}}function q(a){const t=D(a);return M({id:"avatar",initial:"loading",activities:["trackImageRemoval"],context:t,on:{"SRC.CHANGE":{target:"loading"},"IMG.UNMOUNT":{target:"error"}},states:{loading:{activities:["trackSrcChange"],entry:["checkImageStatus"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]},"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}},error:{activities:["trackSrcChange"],on:{"IMG.LOADED":{target:"loaded",actions:["invokeOnLoad"]}}},loaded:{activities:["trackSrcChange"],on:{"IMG.ERROR":{target:"error",actions:["invokeOnError"]}}}}},{activities:{trackSrcChange(e,r,{send:s}){const o=n.getImageEl(e);return G(o,{attributes:["src","srcset"],callback(){s({type:"SRC.CHANGE"})}})},trackImageRemoval(e,r,{send:s}){const o=n.getRootEl(e);return L(o,{callback(c){Array.from(c[0].removedNodes).find(l=>l.matches("[data-scope=avatar][data-part=image]"))&&s({type:"IMG.UNMOUNT"})}})}},actions:{invokeOnLoad(e){var r;(r=e.onStatusChange)==null||r.call(e,{status:"loaded"})},invokeOnError(e){var r;(r=e.onStatusChange)==null||r.call(e,{status:"error"})},checkImageStatus(e,r,{send:s}){const o=n.getImageEl(e);if(o!=null&&o.complete){const c=K(o)?"IMG.LOADED":"IMG.ERROR";s({type:c,src:"ssr"})}}}})}function K(a){return a.complete&&a.naturalWidth!==0&&a.naturalHeight!==0}w()(["dir","id","ids","onStatusChange","getRootNode"]);const Q=(a={})=>{const{getRootNode:t}=_(),{dir:e}=H(),r={id:d.useId(),dir:e,getRootNode:t,...a},s={...r,onStatusChange:T(a.onStatusChange)},[o,c]=x(q(r),{context:s});return W(o,c,j)},E=d.forwardRef((a,t)=>{const[e,r]=B()(a,["id","ids","onStatusChange"]),s=Q(e),o=p(s.getRootProps(),r);return i.jsx(V,{value:s,children:i.jsx(u.div,{...o,ref:t})})});E.displayName="AvatarRoot";const X=C({className:"avatar",slots:h.keys(),base:{root:{rounded:"full",overflow:"hidden"},fallback:{bg:"neutral.200"},image:{bg:"neutral.200"}},variants:{size:{sm:{root:{w:8,h:8},fallback:{w:8,h:8},image:{w:8,h:8}},md:{root:{w:10,h:10},fallback:{w:10,h:10},image:{w:10,h:10}},lg:{root:{w:12,h:12},fallback:{w:12,h:12},image:{w:12,h:12}}}},defaultVariants:{size:"md"}}),Y=d.forwardRef((a,t)=>{const{fallback:e,src:r,alt:s,size:o,className:c,children:g,...I}=a,l=X({size:o}),f=g&&d.Children.only(g);return i.jsxs(E,{ref:t,className:A(l.root,c),...I,children:[i.jsx(b,{src:r,alt:s,className:l.image,asChild:y(f),children:f}),i.jsx(R,{className:l.fallback,asChild:!0,children:e??i.jsx(z,{size:Z(o)})})]})}),Z=a=>a==="sm"?32:a==="md"?40:a==="lg"?48:10;Y.__docgenInfo={description:"",methods:[],displayName:"Avatar"};export{Y as A,z as U};
